"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[1837],{49696:function(e,n,t){var r=t(29439),a=t(72791),i=t(20003),o=t(80184),s=(0,a.forwardRef)((function(e,n){var t,s=e.children,c=e.title,l=e.footer,u=e.formName,d=void 0===u?"form":u,f=(0,a.useState)(!1),m=(0,r.Z)(f,2),p=m[0],x=m[1];return(0,a.useImperativeHandle)(n,(function(){return{handleOpen:function(){x(!0)},handleCancel:function(){x(!1)}}})),(0,o.jsx)(i.Z,{width:1e3,title:c,visible:p,onCancel:null===(t=n.current)||void 0===t?void 0:t.handleCancel,okText:"\u0425\u0430\u0434\u0433\u0430\u043b\u0430\u0445",footer:l,cancelText:"\u0411\u043e\u043b\u0438\u0445",okButtonProps:{form:d,key:"submit",htmlType:"submit"},children:s})}));n.Z=s},82774:function(e,n,t){t.d(n,{E1:function(){return x},Nc:function(){return j},W7:function(){return m},Wg:function(){return h},Yb:function(){return v},hv:function(){return p},sA:function(){return y},yg:function(){return Z}});var r,a,i,o,s,c,l,u,d=t(30168),f=t(27570),m=(0,f.Ps)(r||(r=(0,d.Z)(["\n    query myInbox ($filter: String) {\n        myInbox (filter: $filter) {\n            id\n            sender {\n                firstName\n                lastName\n                groups {\n                    name\n                }\n            }\n            recipient {\n                firstName\n                lastName\n            }\n            subject\n            body\n            createdAt\n        }\n    }\n"]))),p=(0,f.Ps)(a||(a=(0,d.Z)(["\n    query mySent ($filter: String) {\n        mySent (filter: $filter) {\n            id\n            sender {\n                firstName\n                lastName\n                groups {\n                    name\n                }\n            }\n            recipient {\n                firstName\n                lastName\n            }\n            subject\n            body\n            createdAt\n        }\n    }\n"]))),x=(0,f.Ps)(i||(i=(0,d.Z)(["\n    mutation createConversationReply ($body: String, $groups: [Int], $recipient: Int, $subject: String, $files: [Upload]) {\n        createConversation (body: $body, groups: $groups, recipient: $recipient, subject: $subject, files: $files) {\n            conversation {\n                id\n            }\n        }\n    }\n"]))),v=(0,f.Ps)(o||(o=(0,d.Z)(["\n    mutation deleteConversation ($deleteType: ConversationDeleteType, $id: ID) {\n        deleteConversation (deleteType: $deleteType, id: $id) {\n            conversation {\n                id\n            }\n        }\n    }\n"]))),h=(0,f.Ps)(s||(s=(0,d.Z)(["\n    query conversationById ($id: ID!) {\n        conversationById (id: $id) {\n            sender {\n                firstName\n                lastName\n                student {\n                    familyName\n                    name\n                }\n                teacher {\n                    familyName\n                    name\n                }\n                employee {\n                    familyName\n                    name\n                }\n                groups {\n                    name\n                }\n                isTeacher\n                isEmployee\n                isStudent\n            }\n            recipient {\n                firstName\n                lastName\n            }\n            subject\n            body\n            createdAt\n        }\n    }\n"]))),Z=(0,f.Ps)(c||(c=(0,d.Z)(["\n    query allConversationFiles ($conversation: ID!) {\n        allConversationFiles (conversation: $conversation) {\n            file\n        }\n    }\n"]))),y=(0,f.Ps)(l||(l=(0,d.Z)(["\n    query allConversationReply ($conversation: ID!) {\n        allConversationReply (conversation: $conversation) {\n            body\n            user {\n                firstName\n                lastName\n            }\n            conversationreplyfileSet {\n                file\n            }\n            createdAt\n        }\n    }\n"]))),j=(0,f.Ps)(u||(u=(0,d.Z)(["\n    mutation createConversationReply ($conversation: ID, $body: String, $files: [Upload]) {\n        createConversationReply (conversation: $conversation, body: $body, files: $files) {\n            conversationReply {\n                id\n            }\n        }\n    }\n"])))},55585:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r,a=t(1413),i=t(72791),o=t(87309),s=t(31549),c=t(64880),l=t(91523),u=t(38937),d=t(2703),f=t(49696),m=t(29439),p=t(30168),x=t(22949),v=t(73332),h=t(50419),Z=t(37083),y=t(49389),j=t(55064),b=t(72351),g=t(82630),N=t(27570),w=t(96578),C=t(84376),$=t(82774),P=t(80184),S=x.Z.Option,O=(0,N.Ps)(r||(r=(0,p.Z)(["\n    query allGroups {\n        allGroups {\n            id\n            name\n            userSet {\n                id\n                firstName\n                lastName\n            }\n        }\n    }\n"]))),I=function(e){var n=e.handleCancel,t=v.Z.useForm(),r=(0,m.Z)(t,1)[0],s=(0,w.a)(O).data,c=(0,i.useState)([]),l=(0,m.Z)(c,2),u=l[0],d=l[1],f=(0,C.D)($.E1,{refetchQueries:[$.hv,"mySent"],onCompleted:function(e){n(),h.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0438\u043b\u0433\u044d\u044d\u043b\u044d\u044d"),r.resetFields()}}),p=(0,m.Z)(f,2),N=p[0],I=p[1].loading;function A(e){var n=s.allGroups.find((function(n){return n.id===e}));d(n.userSet)}function T(e){r.setFieldsValue({recipient:0})}return(0,P.jsx)(Z.Z,{spinning:I,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,P.jsxs)(v.Z,{name:"form",id:"form",layout:"vertical",form:r,onFinish:function(e){e.files||(e.files=[]),e.recipient||(e.recipient=0),N({variables:e})},children:[(0,P.jsx)(v.Z.Item,{name:"createType",label:"\u0418\u043b\u0433\u044d\u044d\u0445 \u0442\u04e9\u0440\u04e9\u043b",rules:[{required:!0,message:(0,P.jsx)(g.Z,{id:"form.required"})}],children:(0,P.jsxs)(x.Z,{children:[(0,P.jsx)(S,{value:0,children:"\u0425\u044d\u0440\u044d\u0433\u043b\u044d\u0433\u0447\u0438\u0439\u043d \u0431\u04af\u043b\u0433\u044d\u044d\u0440"}),(0,P.jsx)(S,{value:1,children:"\u0413\u0430\u043d\u0446 \u0445\u044d\u0440\u044d\u0433\u043b\u044d\u0433\u0447\u0440\u04af\u04af"})]})}),(0,P.jsx)(v.Z.Item,{name:"subject",label:(0,P.jsx)(g.Z,{id:"title"}),rules:[{required:!0,message:(0,P.jsx)(g.Z,{id:"form.required"})}],children:(0,P.jsx)(y.Z,{})}),(0,P.jsx)(v.Z.Item,{name:"body",label:(0,P.jsx)(g.Z,{id:"conversation"}),rules:[{required:!0,message:(0,P.jsx)(g.Z,{id:"form.required"})}],children:(0,P.jsx)(y.Z.TextArea,{})}),(0,P.jsx)(v.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.createType!==n.createType},children:function(e){var n=e.getFieldValue;return 0===n("createType")?(0,P.jsx)(v.Z.Item,{name:"groups",label:(0,P.jsx)(g.Z,{id:"group"}),rules:[{required:!0,message:(0,P.jsx)(g.Z,{id:"form.required"})}],children:(0,P.jsx)(x.Z,{mode:"multiple",onSelect:A,onDeselect:T,children:null===s||void 0===s?void 0:s.allGroups.map((function(e,n){return(0,P.jsx)(S,{value:e.id,children:e.name},n)}))})}):1===n("createType")?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.Z.Item,{name:"groups",label:(0,P.jsx)(g.Z,{id:"group"}),rules:[{required:!0,message:(0,P.jsx)(g.Z,{id:"form.required"})}],children:(0,P.jsx)(x.Z,{onSelect:A,onDeselect:T,children:null===s||void 0===s?void 0:s.allGroups.map((function(e,n){return(0,P.jsx)(S,{value:e.id,children:e.name},n)}))})}),(0,P.jsx)(v.Z.Item,{name:"recipient",label:(0,P.jsx)(g.Z,{id:"user"}),children:(0,P.jsx)(x.Z,{children:u.map((function(e,n){return(0,P.jsxs)(S,{value:e.id,children:[e.lastName," ",e.firstName]},n)}))})})]}):null}}),(0,P.jsx)(v.Z.Item,{name:"files",label:"\u0425\u0430\u0432\u0441\u0440\u0430\u043b\u0442",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:(0,P.jsx)(j.Z,(0,a.Z)((0,a.Z)({},{name:"file",multiple:!0,beforeUpload:function(e){return!1}}),{},{children:(0,P.jsx)(o.Z,{icon:(0,P.jsx)(b.Z,{}),children:"\u0424\u0430\u0439\u043b \u0441\u043e\u043d\u0433\u043e\u0445"})}))})]})})},A=t(17734),T=function(e){var n=e.match,r=(0,c.TH)(),m=(0,i.useRef)(),p=(0,i.lazy)((function(){return Promise.all([t.e(1033),t.e(6689)]).then(t.bind(t,66689))})),x=(0,i.lazy)((function(){return Promise.all([t.e(1033),t.e(406)]).then(t.bind(t,50406))}));return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.Z,{ref:m,okText:"\u0418\u043b\u0433\u044d\u044d\u0445",children:(0,P.jsx)(I,{handleCancel:function(){m.current.handleCancel()}})}),(0,P.jsxs)("div",{className:"flex flex-col w-full h-full rounded-3xl md:flex-row",children:[(0,P.jsxs)("div",{className:"flex flex-col w-full bg-white m-2 rounded-4 md:w-2/12",children:[(0,P.jsx)(o.Z,{className:"mx-auto mt-4",type:"primary",icon:(0,P.jsx)(s.Z,{}),onClick:function(){m.current.handleOpen()},children:"\u0417\u0430\u0445\u0438\u0434\u0430\u043b \u0431\u0438\u0447\u0438\u0445"}),(0,P.jsx)("nav",{className:"flex-1 w-64 p-6",children:(0,P.jsxs)("div",{className:"space-y-2",children:[(0,P.jsx)(l.rU,{to:"".concat(n.url,"/inbox"),className:"-mx-3 px-3 py-1 flex items-center justify-between text-sm font-medium rounded-lg",children:(0,P.jsxs)("span",{className:"inline-flex",children:[(0,P.jsx)(A.D1,{className:(0,d.AK)("/app/conversation/inbox"===r.pathname?"fill-emind-500":"fill-gray-500","h-6 w-6")}),(0,P.jsx)("span",{className:(0,d.AK)("/app/conversation/inbox"===r.pathname?"text-emind-500":"text-gray-700","ml-2 "),children:"\u0418\u0440\u0441\u044d\u043d"})]})}),(0,P.jsx)(l.rU,{to:"".concat(n.url,"/sent"),className:"-mx-3 px-3 py-1 flex items-center justify-between text-sm font-medium rounded-lg",children:(0,P.jsxs)("span",{className:"inline-flex",children:[(0,P.jsx)(A.Op,{className:(0,d.AK)("/app/conversation/sent"===r.pathname?"fill-emind-500":"fill-gray-500","h-6 w-6")}),(0,P.jsx)("span",{className:(0,d.AK)("/app/conversation/sent"===r.pathname?"text-emind-500":"text-gray-700","ml-2 "),children:"\u0418\u043b\u0433\u044d\u044d\u0441\u044d\u043d"})]})})]})})]}),(0,P.jsx)(i.Suspense,{fallback:(0,P.jsx)(u.Z,{cover:"content"}),children:(0,P.jsxs)(c.rs,{children:[(0,P.jsx)(c.AW,{path:"".concat(n.url,"/inbox"),render:function(e){return(0,P.jsx)(p,(0,a.Z)((0,a.Z)({},e),{},{title:""}))}},"inbox"),(0,P.jsx)(c.AW,{path:"".concat(n.url,"/sent"),render:function(e){return(0,P.jsx)(x,(0,a.Z)((0,a.Z)({},e),{},{title:""}))}},"sent"),(0,P.jsx)(c.l_,{from:"".concat(n.url),to:"".concat(n.url,"/inbox")})]})})]})]})}},31549:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(1413),a=t(72791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=t(8711),s=function(e,n){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:i}))};s.displayName="PlusCircleOutlined";var c=a.forwardRef(s)},72351:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(1413),a=t(72791),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},o=t(8711),s=function(e,n){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:i}))};s.displayName="UploadOutlined";var c=a.forwardRef(s)},19911:function(e,n,t){var r=t(29439),a=t(72791),i=t(96096);n.Z=function(){var e=a.useState(!1),n=(0,r.Z)(e,2),t=n[0],o=n[1];return a.useEffect((function(){o((0,i.fk)())}),[]),t}},79426:function(e,n,t){var r=(0,t(72791).createContext)({});n.Z=r},89752:function(e,n,t){var r=t(4942),a=t(87462),i=t(71002),o=t(72791),s=t(81694),c=t.n(s),l=t(79426),u=t(69077),d=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t};var f=["xs","sm","md","lg","xl","xxl"],m=o.forwardRef((function(e,n){var t,s=o.useContext(u.E_),m=s.getPrefixCls,p=s.direction,x=o.useContext(l.Z),v=x.gutter,h=x.wrap,Z=x.supportFlexGap,y=e.prefixCls,j=e.span,b=e.order,g=e.offset,N=e.push,w=e.pull,C=e.className,$=e.children,P=e.flex,S=e.style,O=d(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),I=m("col",y),A={};f.forEach((function(n){var t,o={},s=e[n];"number"===typeof s?o.span=s:"object"===(0,i.Z)(s)&&(o=s||{}),delete O[n],A=(0,a.Z)((0,a.Z)({},A),(t={},(0,r.Z)(t,"".concat(I,"-").concat(n,"-").concat(o.span),void 0!==o.span),(0,r.Z)(t,"".concat(I,"-").concat(n,"-order-").concat(o.order),o.order||0===o.order),(0,r.Z)(t,"".concat(I,"-").concat(n,"-offset-").concat(o.offset),o.offset||0===o.offset),(0,r.Z)(t,"".concat(I,"-").concat(n,"-push-").concat(o.push),o.push||0===o.push),(0,r.Z)(t,"".concat(I,"-").concat(n,"-pull-").concat(o.pull),o.pull||0===o.pull),(0,r.Z)(t,"".concat(I,"-rtl"),"rtl"===p),t))}));var T=c()(I,(t={},(0,r.Z)(t,"".concat(I,"-").concat(j),void 0!==j),(0,r.Z)(t,"".concat(I,"-order-").concat(b),b),(0,r.Z)(t,"".concat(I,"-offset-").concat(g),g),(0,r.Z)(t,"".concat(I,"-push-").concat(N),N),(0,r.Z)(t,"".concat(I,"-pull-").concat(w),w),t),C,A),E={};if(v&&v[0]>0){var q=v[0]/2;E.paddingLeft=q,E.paddingRight=q}if(v&&v[1]>0&&!Z){var R=v[1]/2;E.paddingTop=R,E.paddingBottom=R}return P&&(E.flex=function(e){return"number"===typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(P),"auto"!==P||!1!==h||E.minWidth||(E.minWidth=0)),o.createElement("div",(0,a.Z)({},O,{style:(0,a.Z)((0,a.Z)({},E),S),className:T,ref:n}),$)}));m.displayName="Col",n.Z=m},37545:function(e,n,t){var r=t(87462),a=t(4942),i=t(71002),o=t(29439),s=t(72791),c=t(81694),l=t.n(c),u=t(69077),d=t(79426),f=t(79393),m=t(78295),p=t(19911),x=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},v=((0,f.b)("top","middle","bottom","stretch"),(0,f.b)("start","end","center","space-around","space-between"),s.forwardRef((function(e,n){var t,c=e.prefixCls,f=e.justify,v=e.align,h=e.className,Z=e.style,y=e.children,j=e.gutter,b=void 0===j?0:j,g=e.wrap,N=x(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),w=s.useContext(u.E_),C=w.getPrefixCls,$=w.direction,P=s.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),S=(0,o.Z)(P,2),O=S[0],I=S[1],A=(0,p.Z)(),T=s.useRef(b);s.useEffect((function(){var e=m.ZP.subscribe((function(e){var n=T.current||0;(!Array.isArray(n)&&"object"===(0,i.Z)(n)||Array.isArray(n)&&("object"===(0,i.Z)(n[0])||"object"===(0,i.Z)(n[1])))&&I(e)}));return function(){return m.ZP.unsubscribe(e)}}),[]);var E=C("row",c),q=function(){var e=[0,0];return(Array.isArray(b)?b:[b,0]).forEach((function(n,t){if("object"===(0,i.Z)(n))for(var r=0;r<m.c4.length;r++){var a=m.c4[r];if(O[a]&&void 0!==n[a]){e[t]=n[a];break}}else e[t]=n||0})),e}(),R=l()(E,(t={},(0,a.Z)(t,"".concat(E,"-no-wrap"),!1===g),(0,a.Z)(t,"".concat(E,"-").concat(f),f),(0,a.Z)(t,"".concat(E,"-").concat(v),v),(0,a.Z)(t,"".concat(E,"-rtl"),"rtl"===$),t),h),k={},F=q[0]>0?q[0]/-2:void 0,D=q[1]>0?q[1]/-2:void 0;if(F&&(k.marginLeft=F,k.marginRight=F),A){var V=(0,o.Z)(q,2);k.rowGap=V[1]}else D&&(k.marginTop=D,k.marginBottom=D);var G=s.useMemo((function(){return{gutter:q,wrap:g,supportFlexGap:A}}),[q,g,A]);return s.createElement(d.Z.Provider,{value:G},s.createElement("div",(0,r.Z)({},N,{className:R,style:(0,r.Z)((0,r.Z)({},k),Z),ref:n}),y))})));v.displayName="Row",n.Z=v}}]);
//# sourceMappingURL=1837.26400d2a.chunk.js.map