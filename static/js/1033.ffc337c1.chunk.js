"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[1033],{47603:function(e,n,t){t.d(n,{Z:function(){return B}});var r=t(74165),a=t(1413),s=t(15861),o=t(29439),l=t(72791),i=t(73332),c=t(66446),d=t(49389),m=t(55064),u=t(87309);var f=l.forwardRef((function(e,n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"}))})),x=t(16049);var v=l.forwardRef((function(e,n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))}));var p=l.forwardRef((function(e,n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"}))})),h=t(82630),g=t(96578),b=t(84376),j=t(82774),w=t(38937),y=t(72426),N=t.n(y),k=t(59305),Z=t(39392),C=t(80184),B=function(e){var n,t,l,y,B,E,L,O=e.selected,I=e.setSelected,M=i.Z.useForm(),R=(0,o.Z)(M,1)[0],T=(0,g.a)(j.Wg,{variables:{id:O}}),A=T.data,P=T.loading,V=(0,g.a)(j.sA,{variables:{conversation:O}}),D=V.data,F=V.loading,H=V.refetch,S=(0,g.a)(j.yg,{variables:{conversation:O}}),W=S.data,z=S.loading,Y=(0,b.D)(j.Nc,{onCompleted:function(e){H(),R.resetFields()}}),_=(0,o.Z)(Y,2),q=_[0],K=_[1].loading;function U(e){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)((0,r.Z)().mark((function e(n){var t,a,s,o,l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,a=n.name,e.next=3,fetch(t);case 3:return s=e.sent,e.next=6,s.blob();case 6:o=e.sent,l=URL.createObjectURL(o),(i=document.createElement("a")).setAttribute("href",l),i.setAttribute("download",a),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){var n="",t=new XMLHttpRequest;t.open("HEAD",e,!1),t.send(null),200===t.status&&(n=t.getResponseHeader("content-length"));var r=Math.floor(Math.log(n)/Math.log(1024));return"".concat(parseFloat((n/Math.pow(1024,r)).toFixed(2))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r])}return P?(0,C.jsx)(w.Z,{cover:"content"}):(0,C.jsxs)("div",{className:"p-4",children:[(0,C.jsx)(f,{className:"h-4 w-4 hover:cursor-pointer",onClick:function(){return I()}}),(0,C.jsxs)("div",{className:"mt-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"text-lg font-medium text-slate-600 ",children:A.conversationById.subject}),(0,C.jsxs)("div",{className:"flex space-x-3 pt-4 pb-6 items-start",children:[(0,C.jsx)("div",{className:"flex-none",children:(0,C.jsx)("div",{className:"h-8 w-8 rounded-full text-white",children:(0,C.jsx)("img",{src:Z,alt:"",className:"block w-full h-full object-cover"})})}),(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsxs)("span",{className:"text-sm text-slate-600  font-medium leading-4",children:[A.conversationById.sender.isStudent?"".concat(null===(n=A.conversationById.sender.student)||void 0===n?void 0:n.familyName," ").concat(null===(t=A.conversationById.sender.student)||void 0===t?void 0:t.name):A.conversationById.sender.isTeacher?"".concat(null===(l=A.conversationById.sender.teacher)||void 0===l?void 0:l.familyName," ").concat(null===(y=A.conversationById.sender.teacher)||void 0===y?void 0:y.name):A.conversationById.sender.isEmployee?"".concat(null===(B=A.conversationById.sender.employee)||void 0===B?void 0:B.familyName," ").concat(null===(E=A.conversationById.sender.employee)||void 0===E?void 0:E.name):"".concat(A.conversationById.sender.lastName," ").concat(A.conversationById.sender.firstName),null===(L=A.conversationById.sender.groups[0])||void 0===L?void 0:L.name]})})]}),(0,C.jsx)("div",{className:"text-sm text-slate-600 whitespace-pre-line font-normal",children:A.conversationById.body}),z?(0,C.jsx)(w.Z,{cover:"content"}):(0,C.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-9 mt-4",children:W.allConversationFiles.map((function(e,n){return(0,C.jsxs)("div",{className:"group relative p-2.5 mb-[30px] mx-[5px] border rounded-[10px] hover:cursor-pointer",onClick:function(){return U({url:k._O+e.file,name:e.file})},children:[(0,C.jsx)("div",{className:"relative before:absolute before:top-0 before:w-full before:h-0 before:bg-dark-transparent before:rounded-[10px] before:transition-all group-hover:before:h-full",children:(0,C.jsx)("img",{src:k._O+e.file,className:"block h-[95px] w-[150px] object-contain",onError:function(e){var n=e.currentTarget;n.onerror=null,n.src="/img/file/file-icon.png"}})}),(0,C.jsx)("div",{className:"gap-x-[10px] absolute top-[40px] left-1/2 -translate-x-1/2 opacity-0 invisible transition-all group-hover:opacity-100 group-hover:visible",children:(0,C.jsx)("div",{className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full bg-[#3fb43fc4]",children:(0,C.jsx)(x.Z,{className:"w-[14px] h-[14px] text-white"})})}),(0,C.jsx)("div",{className:"mt-[10px]",children:(0,C.jsx)("p",{className:"mb-0 text-xs text-body dark:text-white60",children:X(k._O+e.file)})})]},n)}))})]}),F?(0,C.jsx)(w.Z,{cover:"content"}):D.allConversationReply.map((function(e,n){return(0,C.jsx)("div",{className:"flex-col w-full p-2 mt-3 bg-background",children:(0,C.jsxs)("div",{className:"flex flex-row md-10",children:[(0,C.jsx)(c.C,{src:Z,size:"large"}),(0,C.jsxs)("div",{className:"flex-col mt-1",children:[(0,C.jsxs)("div",{className:"flex items-center flex-1 px-4 font-bold leading-tight",children:[e.user.lastName," ",e.user.firstName,(0,C.jsx)("span",{className:"ml-2 text-xs font-normal text-gray-500",children:N().utc(N()(e.createdAt),"YYYYMMDD").fromNow()})]}),(0,C.jsx)("div",{className:"flex-1 px-2 ml-2 text-sm font-medium leading-loose text-gray-600",children:e.body}),e.conversationreplyfileSet.map((function(e,n){return(0,C.jsx)("button",{onClick:function(){return U({url:k._O+e.file})},className:"inline-flex items-center px-1 pt-2 ml-1 flex-column",children:(0,C.jsx)(v,{className:"h-6 w-6"})},n)}))]})]})},n)})),(0,C.jsx)("div",{className:"mt-6 border rounded-xl bg-gray-50 mb-3",children:(0,C.jsxs)(i.Z,{onFinish:function(e){e.files||(e.files=[]),e.conversation=O,q({variables:e})},form:R,children:[(0,C.jsx)(i.Z.Item,{name:"body",rules:[{required:!0,message:(0,C.jsx)(h.Z,{id:"form.required"})}],children:(0,C.jsx)(d.Z.TextArea,{className:"w-full bg-gray-50 p-2 rounded-xl",placeholder:"\u0425\u0430\u0440\u0438\u0443 \u0431\u0438\u0447\u0438\u0445...",rows:"3"})}),(0,C.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,C.jsx)(i.Z.Item,{name:"files",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:(0,C.jsx)(m.Z,(0,a.Z)((0,a.Z)({},{name:"file",multiple:!0,beforeUpload:function(e){return!1}}),{},{children:(0,C.jsx)(p,{className:"h-6 w-6 text-gray-400"})}))}),(0,C.jsx)(i.Z.Item,{children:(0,C.jsx)(u.Z,{loading:K,type:"primary",htmlType:"submit",children:"\u0425\u0430\u0440\u0438\u0443 \u0438\u043b\u0433\u044d\u044d\u0445"})})]})]})})]})]})}},70789:function(e,n,t){var r=t(93433),a=(t(72791),t(72426)),s=t.n(a),o=t(39392),l=t(80184);n.Z=function(e){var n=e.data,t=(e.selected,e.setSelected),a=e.setCheckedList,i=e.isChecked,c=e.to;return(0,l.jsxs)("li",{className:"flex px-7 space-x-6 group md:py-6 py-3 relative cursor-pointer hover:bg-slate-50 group items-center rtl:space-x-reverse",onClick:function(e){switch(e.target.id){case"checkbox":case"delete":break;default:t(n.id)}},children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{onChange:function(e){e.target.checked?a((function(e){return[].concat((0,r.Z)(e),[n.id])})):a((function(e){return e.filter((function(e){return e!==n.id}))}))},id:"checkbox",checked:i,name:n.id,className:"focus:ring-indigo-500 h-4 w-4 accent-emind border-gray-300 rounded",type:"checkbox"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[(0,l.jsx)("div",{className:"flex-none",children:(0,l.jsx)("div",{className:"h-8 w-8 rounded-full text-white",children:(0,l.jsx)("img",{src:o,alt:"",className:"block w-full h-full object-cover"})})}),(0,l.jsx)("div",{className:"font-medium text-slate-900 ",children:c?"".concat(n.recipient.lastName," ").concat(n.recipient.firstName):"".concat(n.sender.lastName," ").concat(n.sender.firstName)})]}),(0,l.jsxs)("p",{className:"truncate",children:[(0,l.jsx)("span",{className:"font-medium text-slate-900 ",children:n.subject}),(0,l.jsx)("span",{className:"text-sm ml-4 text-slate-600 font-normal",children:n.body})]}),(0,l.jsx)("div",{className:"grow"}),(0,l.jsx)("span",{children:(0,l.jsx)("div",{className:"flex-1 flex space-x-4 items-center",children:(0,l.jsx)("span",{className:"flex-none space-x-2 text-xs text-slate-900 ",children:(0,l.jsx)("span",{children:s()(n.createdAt).format("MMM D")})})})})]})}},96038:function(e,n,t){var r=t(87462),a=t(29439),s=t(72791),o=t(81694),l=t.n(o),i=t(49841),c=t(10187),d=t(11354),m=t(64469),u=t(87309),f=t(6417),x=t(93486),v=t(19410),p=t(69077),h=t(57924),g=t(61113),b=t(29464),j=void 0,w=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},y=s.forwardRef((function(e,n){var t=(0,i.Z)(!1,{value:e.visible,defaultValue:e.defaultVisible}),o=(0,a.Z)(t,2),c=o[0],y=o[1],N=function(n,t){var r;y(n),null===(r=e.onVisibleChange)||void 0===r||r.call(e,n,t)},k=function(n){var t;N(!1,n),null===(t=e.onConfirm)||void 0===t||t.call(j,n)},Z=function(n){var t;N(!1,n),null===(t=e.onCancel)||void 0===t||t.call(j,n)},C=s.useContext(p.E_).getPrefixCls,B=e.prefixCls,E=e.placement,L=e.children,O=e.overlayClassName,I=w(e,["prefixCls","placement","children","overlayClassName"]),M=C("popover",B),R=C("popconfirm",B),T=l()(R,O),A=s.createElement(x.Z,{componentName:"Popconfirm",defaultLocale:v.Z.Popconfirm},(function(n){return function(n,t){var a=e.okButtonProps,o=e.cancelButtonProps,l=e.title,i=e.cancelText,c=e.okText,d=e.okType,m=e.icon;return s.createElement("div",{className:"".concat(n,"-inner-content")},s.createElement("div",{className:"".concat(n,"-message")},m,s.createElement("div",{className:"".concat(n,"-message-title")},(0,h.Z)(l))),s.createElement("div",{className:"".concat(n,"-buttons")},s.createElement(u.Z,(0,r.Z)({onClick:Z,size:"small"},o),i||t.cancelText),s.createElement(u.Z,(0,r.Z)({onClick:k},(0,f.n)(d),{size:"small"},a),c||t.okText)))}(M,n)})),P=C();return s.createElement(m.Z,(0,r.Z)({},I,{prefixCls:M,placement:E,onVisibleChange:function(n){e.disabled||N(n)},visible:c,overlay:A,overlayClassName:T,ref:n,transitionName:(0,b.m)(P,"zoom-big",e.transitionName)}),(0,g.Tm)(L,{onKeyDown:function(e){var n,t;s.isValidElement(L)&&(null===(t=null===L||void 0===L?void 0:(n=L.props).onKeyDown)||void 0===t||t.call(n,e)),function(e){e.keyCode===d.Z.ESC&&c&&N(!1,e)}(e)}}))}));y.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:s.createElement(c.Z,null),disabled:!1},n.Z=y},39392:function(e,n,t){e.exports=t.p+"static/media/user.a6143582309785dca610.png"},16049:function(e,n,t){var r=t(72791);var a=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}))}));n.Z=a},8479:function(e,n,t){var r=t(72791);var a=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}))}));n.Z=a},70803:function(e,n,t){var r=t(72791);var a=r.forwardRef((function(e,n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))}));n.Z=a}}]);
//# sourceMappingURL=1033.ffc337c1.chunk.js.map