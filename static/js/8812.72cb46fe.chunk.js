"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[8812],{74021:function(e,t,n){var i=n(29439),r=n(72791),a=n(66871),s=n(49389),o=n(87309),l=n(71381),c=n(11730),d=n(31549),u=n(82630),f=n(68470),m=n(80184);t.Z=function(e){var t=e.fetchData,n=e.loading,x=e.columns,Z=e.data,v=e.permissions,h=e.showModal,p=(0,r.useState)(""),j=(0,i.Z)(p,2),$=(j[0],j[1]);return(0,m.jsxs)(a.Z,{children:[(0,m.jsxs)(f.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[(0,m.jsx)(f.Z,{className:"mb-1",mobileFlex:!1,children:(0,m.jsx)("div",{className:"mr-md-3 mb-3",children:(0,m.jsx)(s.Z,{placeholder:"\u0425\u0430\u0439\u0445",prefix:(0,m.jsx)(c.Z,{}),onChange:function(e){return function(e){var n=e.currentTarget.value;t({variables:{offset:0,limit:10,filter:n,program:0}}),$(n)}(e)}})})}),!0===v.create&&(0,m.jsx)("div",{className:"mr-md-3 mb-3",children:(0,m.jsxs)(o.Z,{onClick:h,type:"primary",icon:(0,m.jsx)(d.Z,{}),block:!0,children:[" ",(0,m.jsx)(u.Z,{id:"add_new"})]})})]}),(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsx)(l.Z,{size:"small",columns:x,dataSource:Z,rowKey:"id",bordered:!0,loading:n})})]})}},68470:function(e,t,n){n(72791);var i=n(80184),r=function(e){var t=e.children,n=e.className,r=e.alignItems,a=e.justifyContent,s=e.mobileFlex,o=e.flexDirection;return(0,i.jsx)("div",{className:"".concat(s?"d-flex":"d-md-flex"," ").concat(n," ").concat(o?"flex-"+o:""," ").concat(r?"align-items-"+r:""," ").concat(a?"justify-content-"+a:""),children:t})};r.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},t.Z=r},21708:function(e,t,n){n.d(t,{FP:function(){return u},Pg:function(){return d},fc:function(){return x},l7:function(){return f},rT:function(){return m}});var i,r,a,s,o,l=n(30168),c=n(27570),d=(0,c.Ps)(i||(i=(0,l.Z)(['\n    query allLives ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "live", modelName: "Live", filter: $filter) {\n            count\n        }\n        allLives (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            title\n            date\n            duration\n            description\n            status\n            type\n            section {\n                id\n                section\n            }\n            password\n            teacher {\n                id\n                name\n            }\n            password\n        }\n    }\n']))),u=(0,c.Ps)(r||(r=(0,l.Z)(["\n    mutation createLive ($date: String, $description: String, $duration: Int, $status: String, $teacher: Int, $title: String, $section: Int) {\n        createLive (date: $date, description: $description, duration: $duration, status: $status, teacher: $teacher, title: $title, section: $section) {\n            live {\n                id\n            }\n        }\n    }\n"]))),f=(0,c.Ps)(a||(a=(0,l.Z)(["\n    mutation updateLive ($date: String, $description: String, $duration: Int, $id: ID, $status: String, $teacher: Int, $title: String, $section: Int) {\n        updateLive (date: $date, description: $description, duration: $duration, id: $id, status: $status, teacher: $teacher, title: $title, section: $section) {\n            live {\n                id\n            }\n        }\n    }\n"]))),m=(0,c.Ps)(s||(s=(0,l.Z)(["\n    mutation deleteLive ($id: ID) {\n        deleteLive (id: $id) {\n            live {\n                title\n            }\n        }\n    }\n"]))),x=(0,c.Ps)(o||(o=(0,l.Z)(["\n    query getLiveurl ($liveId: Int) {\n        getLiveurl (liveId: $liveId) {\n            url\n        }\n    }\n"])))},48812:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i=n(72791),r=n(29439),a=n(20003),s=n(50419),o=n(87309),l=n(77154),c=n(36795),d=n(82464),u=n(2703),f=n(86586),m=n(84376),x=n(82630),Z=n(21708),v=n(72426),h=n.n(v),p=n(74021),j=n(38937),$=n(80184),g=(0,i.lazy)((function(){return Promise.all([n.e(3332),n.e(163),n.e(6835),n.e(7320)]).then(n.bind(n,17320))})),y=function(e){var t=(0,i.useState)([]),n=(0,r.Z)(t,2),v=n[0],y=n[1],b=(0,i.useState)(0),k=(0,r.Z)(b,2),w=k[0],C=k[1],I=(0,f.t)(Z.Pg,{fetchPolicy:"network-only",onCompleted:function(e){C(e.count.count),y(e.allLives)}}),S=(0,r.Z)(I,2),T=S[0],P=S[1],L=P.loading,z=P.refetch,M=(0,f.t)(Z.fc,{fetchPolicy:"network-only",onCompleted:function(e){window.open(e.getLiveurl.url,"_blank")}}),N=(0,r.Z)(M,1)[0];(0,i.useEffect)((function(){T({variables:{offset:0,limit:10,filter:""}})}),[T]);var D=(0,i.useState)(!1),F=(0,r.Z)(D,2),_=F[0],Y=F[1],E=(0,i.useState)([]),O=(0,r.Z)(E,2),q=O[0],B=O[1],H=(0,i.useState)(""),R=(0,r.Z)(H,2),K=R[0],V=R[1],A=a.Z.confirm,G=(0,m.D)(Z.rT,{onCompleted:function(e){s.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430"),z()}}),J=(0,r.Z)(G,1)[0];var Q=[{key:"title",title:(0,$.jsx)(x.Z,{id:"title"}),dataIndex:"title",sorter:function(e,t){return u.ZP.antdTableSorter(e,t,"title")}},{key:"type",title:(0,$.jsx)(x.Z,{id:"onlineType"}),dataIndex:"type",sorter:function(e,t){return u.ZP.antdTableSorter(e,t,"type")},render:function(e){return(0,$.jsx)(x.Z,{id:e})}},{key:"teacher",title:(0,$.jsx)(x.Z,{id:"teacher"}),dataIndex:["teacher","name"],sorter:function(e,t){return u.ZP.antdTableSorter(e,t,"teacher")}},{key:"date",title:(0,$.jsx)(x.Z,{id:"date"}),dataIndex:"date",sorter:function(e,t){return u.ZP.antdTableSorter(e,t,"date")},render:function(e){return(0,$.jsx)("span",{children:h()(e).format("YYYY-MM-DD HH:mm")})}},{key:"duration",title:(0,$.jsx)(x.Z,{id:"duration"}),dataIndex:"duration",sorter:function(e,t){return u.ZP.antdTableSorter(e,t,"duration")}},{key:"actions",title:(0,$.jsx)(x.Z,{id:"main.action"}),width:"20vw",dataIndex:"actions",render:function(t,n){return(0,$.jsxs)("div",{className:"text-center",children:[(0,$.jsxs)(o.Z,{size:"small",type:"text",icon:(0,$.jsx)(l.Z,{}),onClick:function(){N({variables:{liveId:n.id}})},children:[" ",(0,$.jsx)(x.Z,{id:"show"})," "]}),!0===e.permissions.edit&&(0,$.jsxs)(o.Z,{size:"small",onClick:function(){return B(n),V("edit"),void Y(!0)},type:"text",icon:(0,$.jsx)(c.Z,{twoToneColor:"#ffdb00"}),children:[" ",(0,$.jsx)(x.Z,{id:"edit"})," "]}),!0===e.permissions.destroy&&(0,$.jsxs)(o.Z,{size:"small",onClick:function(){return e=n,void A({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){J({variables:{id:e.id,name:e.name,nameMgl:e.nameMgl}})}});var e},type:"text",icon:(0,$.jsx)(d.Z,{twoToneColor:"#f42f2f"}),children:[" ",(0,$.jsx)(x.Z,{id:"delete"})]})]})}}];return(0,$.jsxs)($.Fragment,{children:[e.permissions.edit||e.permissions.create?(0,$.jsx)(a.Z,{width:"80vw",forceRender:!0,title:"edit"===K?(0,$.jsx)(x.Z,{id:"edit"}):(0,$.jsx)(x.Z,{id:"add_new"}),visible:_,okText:(0,$.jsx)(x.Z,{id:"main.okText"}),cancelText:(0,$.jsx)(x.Z,{id:"main.cancelText"}),onCancel:function(){Y(!1)},okButtonProps:{form:"SchoolForm",key:"submit",htmlType:"submit"},children:(0,$.jsx)(i.Suspense,{fallback:(0,$.jsx)(j.Z,{cover:"content"}),children:(0,$.jsx)(g,{formType:K,setIsModalVisible:Y,refetch:z,editData:q})})}):null,(0,$.jsx)(p.Z,{fetchData:T,loading:L,columns:Q,data:v,count:w,permissions:e.permissions,showModal:function(){V("create"),Y(!0)}})]})},b=n(59288),k=function(e){var t={create:(0,b.C)("add_live"),edit:(0,b.C)("change_live"),destroy:(0,b.C)("delete_live")};return Object.values(t).indexOf("loading")>-1?(0,$.jsx)(j.Z,{cover:"content"}):(0,$.jsx)(y,{title:e.title,permissions:t})}},77154:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(1413),r=n(72791),a={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M81.8 537.8a60.3 60.3 0 010-51.5C176.6 286.5 319.8 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c-192.1 0-335.4-100.5-430.2-300.2z",fill:t}},{tag:"path",attrs:{d:"M512 258c-161.3 0-279.4 81.8-362.7 254C232.6 684.2 350.7 766 512 766c161.4 0 279.5-81.8 362.7-254C791.4 339.8 673.3 258 512 258zm-4 430c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z",fill:t}},{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258s279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z",fill:e}},{tag:"path",attrs:{d:"M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z",fill:e}}]}},name:"eye",theme:"twotone"},s=n(8711),o=function(e,t){return r.createElement(s.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t,icon:a}))};o.displayName="EyeTwoTone";var l=r.forwardRef(o)}}]);
//# sourceMappingURL=8812.72cb46fe.chunk.js.map