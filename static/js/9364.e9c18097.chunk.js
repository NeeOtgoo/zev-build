"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[9364],{96679:function(e,n,t){t.d(n,{m:function(){return r}});var r="http://66.181.175.235:8001"},41963:function(e,n,t){t.d(n,{Hi:function(){return d},ar:function(){return u},nA:function(){return m}});var r,s,a,i,l,c=t(30168),o=t(27570),u=(0,o.Ps)(r||(r=(0,c.Z)(["\n    query studentReport ($studentCode: String) {\n        studentReport (studentCode: $studentCode) {\n            school\n            textTop\n            textMid\n            textBottom\n            studentPhoto\n            studentCode\n        }\n    }\n"]))),d=(0,o.Ps)(s||(s=(0,c.Z)(["\n    query studentReportSection ($section: Int) {\n        studentReportSection (section: $section) {\n            school\n            textTop\n            textMid\n            textBottom\n            studentPhoto\n            studentCode\n        }\n    }\n"]))),m=((0,o.Ps)(a||(a=(0,c.Z)(["\n    query allSections {\n        allSections {\n            id\n            section\n        }\n    }\n"]))),(0,o.Ps)(i||(i=(0,c.Z)(["\n    query studentSchoolyear ($student: Int) {\n        studentSchoolyear (student: $student) {\n            id\n            schoolyear\n            season\n            semesterCode\n            startDate\n            endDate\n        }\n    }\n"]))),(0,o.Ps)(l||(l=(0,c.Z)(["\n    query allStudentsReport {\n        allStudentsReport {\n            id\n            user {\n                id\n                username\n                email\n            }\n            studentCode\n            surname\n            familyName\n            name\n            religion\n            registerNo\n            nationality\n            state\n            photo\n            phone\n            address\n            activity {\n                id\n                name\n            }\n            joinDate\n            sex\n            birthdate\n            classtime {\n                id\n                name\n            }\n            birthCity {\n                id\n                name\n            }\n            birthDistrict {\n                id\n                name\n            }\n            status {\n                id\n                name\n            }\n            statusExtra {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            classes {\n                id\n                classes\n            }\n            section {\n                id\n                section\n            }\n            program {\n                id\n                program\n            }\n            joinSchoolyear {\n                id\n                schoolyear\n            }\n        }\n    }\n"]))))},68694:function(e,n,t){t.d(n,{Cm:function(){return x},Cx:function(){return f},FQ:function(){return h},JX:function(){return m},dT:function(){return p},gt:function(){return g},tL:function(){return Z}});var r,s,a,i,l,c,o,u=t(30168),d=t(27570),m=(0,d.Ps)(r||(r=(0,u.Z)(["\n    query allStudents ($filter: String) {\n        allStudents (filter: $filter) {\n            id\n            familyName\n            name\n            studentCode\n        }\n\t}\n"]))),f=(0,d.Ps)(s||(s=(0,u.Z)(["\n    query allTeachers ($filter: String) {\n        allTeachers (filter: $filter) {\n            id\n            familyName\n            name\n            teacherCode\n        }\n    }\n"]))),h=(0,d.Ps)(a||(a=(0,u.Z)(["\n    query allClassess ($filter: String, $program: Int) {\n        allClassess (filter: $filter, program: $program) {\n            id\n            classes\n        }\n\t}\n"]))),x=(0,d.Ps)(i||(i=(0,u.Z)(['\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "subject", modelName: "Subject", filter: $filter) {\n            count\n        }\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            subject \n            content\n        }\n    }\n']))),p=(0,d.Ps)(l||(l=(0,u.Z)(["\n    query selectProgram {\n        allPrograms {\n            id\n            program\n        }\n    }\n"]))),Z=(0,d.Ps)(c||(c=(0,u.Z)(["\n    query sectionsByProgram ($program: Int!) {\n        sectionsByProgram (program: $program) {\n            id\n            section \n            classes {\n                classes\n            }\n        }\n    }\n"]))),g=(0,d.Ps)(o||(o=(0,u.Z)(["\n    query sectionsByClasses ($classes: Int!){\n        sectionsByClasses (classes: $classes) {\n            id \n            section\n        }\n    }\n"])))},26591:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(29439),s=t(72791),a=t(96578),i=t(86586),l=t(22949),c=t(73332),o=t(58361),u=t(66106),d=t(30914),m=t(66871),f=t(69421),h=t(87309),x=t(61146),p=t(41963),Z=t(78803),g=t(15671),v=t(43144),j=t(60136),y=t(29388),C=t(91333),N=t(36755),S=t(96679),E=t(80184),P=function(e){(0,j.Z)(t,e);var n=(0,y.Z)(t);function t(){return(0,g.Z)(this,t),n.apply(this,arguments)}return(0,v.Z)(t,[{key:"render",value:function(){var e=[];return this.props.datas.map((function(n,t){var r=(0,E.jsx)("div",{className:"page-break",children:(0,E.jsxs)(m.Z,{style:{fontFamily:"Times New Roman",lineHeight:"17px",color:"black"},className:"aaa",bordered:!1,children:[(0,E.jsxs)(u.Z,{gutter:[16,16],children:[(0,E.jsx)(d.Z,{span:8,className:"text-right",children:(0,E.jsx)("img",{style:{maxHeight:"100px"},src:"/img/logo.png",alt:"logo"})}),(0,E.jsx)(d.Z,{span:8,children:(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)("b",{style:{fontSize:"32px"},children:n.school}),(0,E.jsx)("div",{className:"text-center mt-3",style:{fontSize:"11px",lineHeight:"10px"},dangerouslySetInnerHTML:{__html:n.textTop}})]})}),(0,E.jsx)(d.Z,{span:8,className:"text-left",children:(0,E.jsx)("img",{style:{maxHeight:"100px"},src:S.m+n.studentPhoto,alt:"studentPhoto"})})]}),(0,E.jsx)(C.Z,{}),(0,E.jsx)(u.Z,{children:(0,E.jsxs)(d.Z,{span:24,className:"text-center",children:[(0,E.jsx)("b",{children:"\u0421\u0443\u0440\u0430\u043b\u0446\u0430\u0433\u0447\u0438\u0439\u043d \u0442\u043e\u0434\u043e\u0440\u0445\u043e\u0439\u043b\u043e\u043b\u0442"}),(0,E.jsx)("div",{style:{fontSize:"15px"},dangerouslySetInnerHTML:{__html:n.textMid}})]})}),(0,E.jsx)(C.Z,{}),(0,E.jsx)(u.Z,{gutter:[16,16],children:(0,E.jsx)(d.Z,{span:24,children:(0,E.jsx)("div",{className:"text-center",dangerouslySetInnerHTML:{__html:n.textBottom}})})}),(0,E.jsx)(u.Z,{children:(0,E.jsx)(d.Z,{span:24,className:"text-center",children:(0,E.jsx)(N.Z,{src:"https://chart.googleapis.com/chart?chs=177x177&cht=qr&chl=http%3A%2F%2F".concat(window.location.hostname,"%2Freport/student-report%2F").concat(n.studentCode,"&chld=H&choe=UTF-8"),preview:!1})})})]})},t);return e.push(r)})),(0,E.jsx)("div",{children:e})}}]),t}(s.Component),w=P,b=t(82630),q=t(53719),$=t(68694),I=t(38937),T=l.Z.Option,k=function(){var e=(0,s.useState)(),n=(0,r.Z)(e,2),t=n[0],g=n[1],v=(0,s.useContext)(q.S),j=(0,s.useState)(v.user),y=(0,r.Z)(j,1)[0],C=c.Z.useForm(),N=(0,r.Z)(C,1)[0],S=c.Z.useForm(),P=(0,r.Z)(S,1)[0],k=(0,s.useState)([]),F=(0,r.Z)(k,2),M=F[0],R=F[1],z=(0,s.useState)([]),B=(0,r.Z)(z,2),H=B[0],L=B[1],_=(0,s.useState)([]),A=(0,r.Z)(_,2),D=A[0],O=A[1],G=(0,a.a)($.dT,{onCompleted:function(e){R(e.allPrograms)}}).loading,J=(0,i.t)($.tL,{onCompleted:function(e){L(e.sectionsByProgram)}}),X=(0,r.Z)(J,2),Q=X[0],U=X[1].loading,V=(0,i.t)($.JX,{onCompleted:function(e){O(e.allStudents)}}),K=(0,r.Z)(V,2),W=K[0],Y=K[1].loading,ee=(0,i.t)(p.ar,{onError:function(e){g()},onCompleted:function(e){g([e.studentReport])}}),ne=(0,r.Z)(ee,2),te=ne[0],re=ne[1].loading,se=(0,i.t)(p.Hi,{onError:function(e){g()},onCompleted:function(e){g(e.studentReportSection)}}),ae=(0,r.Z)(se,2),ie=ae[0],le=ae[1].loading,ce=(0,s.useRef)(),oe=(0,x.useReactToPrint)({content:function(){return ce.current}}),ue=function(e){e.hasOwnProperty("studentCode")?te({variables:{studentCode:e.studentCode}}):ie({variables:{section:e.section}})};(0,s.useEffect)((function(){!0===y.isStudent&&te({variables:{studentCode:y.student.studentCode}})}),[te,y]);return(0,E.jsxs)("div",{children:[!1===y.isStudent&&(0,E.jsx)(o.Z,{active:!0,loading:G,children:(0,E.jsxs)(u.Z,{gutter:16,children:[(0,E.jsx)(d.Z,{xs:24,xl:12,children:(0,E.jsx)(m.Z,{className:"mt-4",title:(0,E.jsx)(b.Z,{id:"by-section"}),children:(0,E.jsxs)(c.Z,{id:"section",layout:"vertical",form:N,name:"control-hooks",onFinish:ue,children:[(0,E.jsx)(c.Z.Item,{name:"program",label:(0,E.jsx)(b.Z,{id:"program"}),rules:[{required:!0,message:(0,E.jsx)(b.Z,{id:"form.required"})}],children:(0,E.jsx)(l.Z,{onSelect:function(e){N.setFieldsValue({section:""}),Q({variables:{program:e}})},allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){return n.children.toString().toLowerCase().indexOf(e.toLowerCase())>=0},children:M.map((function(e,n){return(0,E.jsxs)(T,{value:e.id,children:[e.program," / ",e.programNumeric]},n)}))})}),(0,E.jsx)(c.Z.Item,{name:"section",label:(0,E.jsx)(b.Z,{id:"section"}),rules:[{required:!0,message:(0,E.jsx)(b.Z,{id:"form.required"})}],children:(0,E.jsx)(l.Z,{allowClear:!0,notFoundContent:U?(0,E.jsx)(I.Z,{cover:"content"}):(0,E.jsx)(f.Z,{image:f.Z.PRESENTED_IMAGE_SIMPLE}),children:H.map((function(e,n){return(0,E.jsxs)(T,{value:e.id,children:[e.classes.classes," / ",e.section]},n)}))})}),(0,E.jsx)(c.Z.Item,{className:"text-right",children:(0,E.jsx)(h.Z,{className:"mr-2",type:"primary",htmlType:"submit",loading:le,children:"\u0421\u043e\u043d\u0433\u043e\u0445"})})]})})}),(0,E.jsx)(d.Z,{xs:24,xl:12,children:(0,E.jsx)(m.Z,{className:"mt-4",title:(0,E.jsx)(b.Z,{id:"by-student-code"}),children:(0,E.jsxs)(c.Z,{id:"student",layout:"vertical",form:P,name:"control-hooks",onFinish:ue,children:[(0,E.jsx)(c.Z.Item,{name:"studentCode",label:(0,E.jsx)(b.Z,{id:"studentCode"}),rules:[{required:!0,message:(0,E.jsx)(b.Z,{id:"form.required"})}],children:(0,E.jsx)(l.Z,{showSearch:!0,filterOption:!1,notFoundContent:Y?(0,E.jsx)(I.Z,{cover:"content"}):(0,E.jsx)(f.Z,{image:f.Z.PRESENTED_IMAGE_SIMPLE}),onSearch:function(e){""===e?O([]):W({variables:{offset:0,limit:99999999,filter:e}})},children:D.map((function(e,n){return(0,E.jsxs)(T,{value:e.studentCode,children:[" ",e.familyName," ",e.name," / ",e.studentCode]},n)}))})}),(0,E.jsx)(c.Z.Item,{className:"text-right",children:(0,E.jsx)(h.Z,{className:"mr-2",type:"primary",htmlType:"submit",loading:re,children:"\u0421\u043e\u043d\u0433\u043e\u0445"})})]})})})]})}),t&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"text-right",children:(0,E.jsxs)(h.Z,{onClick:oe,type:"primary",icon:(0,E.jsx)(Z.Z,{}),children:[" ",(0,E.jsx)(b.Z,{id:"print"})]})}),(0,E.jsx)(w,{ref:ce,datas:t})]})]})}},37295:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(1413),s=t(72791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},i=t(8711),l=function(e,n){return s.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:a}))};l.displayName="DownOutlined";var c=s.forwardRef(l)},19581:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(29439),s=t(72791);function a(){var e=s.useReducer((function(e){return e+1}),0);return(0,r.Z)(e,2)[1]}},58361:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(4942),s=t(87462),a=t(71002),i=t(72791),l=t(81694),c=t.n(l),o=function(e){var n=e.prefixCls,t=e.className,r=e.width,a=e.style;return i.createElement("h3",{className:c()(n,t),style:(0,s.Z)({width:r},a)})},u=t(93433),d=function(e){var n=function(n){var t=e.width,r=e.rows,s=void 0===r?2:r;return Array.isArray(t)?t[n]:s-1===n?t:void 0},t=e.prefixCls,r=e.className,s=e.style,a=e.rows,l=(0,u.Z)(Array(a)).map((function(e,t){return i.createElement("li",{key:t,style:{width:n(t)}})}));return i.createElement("ul",{className:c()(t,r),style:s},l)},m=t(69077),f=function(e){var n,t,a=e.prefixCls,l=e.className,o=e.style,u=e.size,d=e.shape,m=c()((n={},(0,r.Z)(n,"".concat(a,"-lg"),"large"===u),(0,r.Z)(n,"".concat(a,"-sm"),"small"===u),n)),f=c()((t={},(0,r.Z)(t,"".concat(a,"-circle"),"circle"===d),(0,r.Z)(t,"".concat(a,"-square"),"square"===d),(0,r.Z)(t,"".concat(a,"-round"),"round"===d),t)),h="number"===typeof u?{width:u,height:u,lineHeight:"".concat(u,"px")}:{};return i.createElement("span",{className:c()(a,m,f,l),style:(0,s.Z)((0,s.Z)({},h),o)})},h=t(41818),x=function(e){var n=function(n){var t=n.getPrefixCls,a=e.prefixCls,l=e.className,o=e.active,u=t("skeleton",a),d=(0,h.Z)(e,["prefixCls","className"]),m=c()(u,"".concat(u,"-element"),(0,r.Z)({},"".concat(u,"-active"),o),l);return i.createElement("div",{className:m},i.createElement(f,(0,s.Z)({prefixCls:"".concat(u,"-avatar")},d)))};return i.createElement(m.C,null,n)};x.defaultProps={size:"default",shape:"circle"};var p=x,Z=function(e){var n=function(n){var t=n.getPrefixCls,a=e.prefixCls,l=e.className,o=e.active,u=t("skeleton",a),d=(0,h.Z)(e,["prefixCls"]),m=c()(u,"".concat(u,"-element"),(0,r.Z)({},"".concat(u,"-active"),o),l);return i.createElement("div",{className:m},i.createElement(f,(0,s.Z)({prefixCls:"".concat(u,"-button")},d)))};return i.createElement(m.C,null,n)};Z.defaultProps={size:"default"};var g=Z,v=function(e){var n=function(n){var t=n.getPrefixCls,a=e.prefixCls,l=e.className,o=e.active,u=t("skeleton",a),d=(0,h.Z)(e,["prefixCls"]),m=c()(u,"".concat(u,"-element"),(0,r.Z)({},"".concat(u,"-active"),o),l);return i.createElement("div",{className:m},i.createElement(f,(0,s.Z)({prefixCls:"".concat(u,"-input")},d)))};return i.createElement(m.C,null,n)};v.defaultProps={size:"default"};var j=v,y=function(e){var n=function(n){var t=n.getPrefixCls,r=e.prefixCls,s=e.className,a=e.style,l=t("skeleton",r),o=c()(l,"".concat(l,"-element"),s);return i.createElement("div",{className:o},i.createElement("div",{className:c()("".concat(l,"-image"),s),style:a},i.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(l,"-image-svg")},i.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:"".concat(l,"-image-path")}))))};return i.createElement(m.C,null,n)};function C(e){return e&&"object"===(0,a.Z)(e)?e:{}}var N=function(e){var n=function(n){var t=n.getPrefixCls,a=n.direction,l=e.prefixCls,u=e.loading,m=e.className,h=e.children,x=e.avatar,p=e.title,Z=e.paragraph,g=e.active,v=e.round,j=t("skeleton",l);if(u||!("loading"in e)){var y,N,S,E=!!x,P=!!p,w=!!Z;if(E){var b=(0,s.Z)((0,s.Z)({prefixCls:"".concat(j,"-avatar")},function(e,n){return e&&!n?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(P,w)),C(x));N=i.createElement("div",{className:"".concat(j,"-header")},i.createElement(f,b))}if(P||w){var q,$;if(P){var I=(0,s.Z)((0,s.Z)({prefixCls:"".concat(j,"-title")},function(e,n){return!e&&n?{width:"38%"}:e&&n?{width:"50%"}:{}}(E,w)),C(p));q=i.createElement(o,I)}if(w){var T=(0,s.Z)((0,s.Z)({prefixCls:"".concat(j,"-paragraph")},function(e,n){var t={};return e&&n||(t.width="61%"),t.rows=!e&&n?3:2,t}(E,P)),C(Z));$=i.createElement(d,T)}S=i.createElement("div",{className:"".concat(j,"-content")},q,$)}var k=c()(j,(y={},(0,r.Z)(y,"".concat(j,"-with-avatar"),E),(0,r.Z)(y,"".concat(j,"-active"),g),(0,r.Z)(y,"".concat(j,"-rtl"),"rtl"===a),(0,r.Z)(y,"".concat(j,"-round"),v),y),m);return i.createElement("div",{className:k},N,S)}return h};return i.createElement(m.C,null,n)};N.defaultProps={avatar:!1,title:!0,paragraph:!0},N.Button=g,N.Avatar=p,N.Input=j,N.Image=y;var S=N}}]);
//# sourceMappingURL=9364.e9c18097.chunk.js.map