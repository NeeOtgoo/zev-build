"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[3838],{68470:function(n,e,t){t(72791);var a=t(80184),s=function(n){var e=n.children,t=n.className,s=n.alignItems,i=n.justifyContent,r=n.mobileFlex,o=n.flexDirection;return(0,a.jsx)("div",{className:"".concat(r?"d-flex":"d-md-flex"," ").concat(t," ").concat(o?"flex-"+o:""," ").concat(s?"align-items-"+s:""," ").concat(i?"justify-content-"+i:""),children:e})};s.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},e.Z=s},41920:function(n,e,t){t.d(e,{$_:function(){return O},A9:function(){return nn},Be:function(){return L},Dp:function(){return G},Fm:function(){return z},J7:function(){return R},Ko:function(){return X},MA:function(){return k},NC:function(){return F},O8:function(){return V},TW:function(){return E},Vr:function(){return H},YP:function(){return U},YV:function(){return K},gw:function(){return B},nS:function(){return Q},nh:function(){return J},pQ:function(){return M},r1:function(){return _},tz:function(){return Y},vh:function(){return W},vp:function(){return A}});var a,s,i,r,o,l,d,c,u,m,f,y,h,p,g,S,$,x,Z,v,b,P,C,D,N,j,q,I,T=t(30168),w=t(27570),E=(0,w.Ps)(a||(a=(0,T.Z)(["\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            school {\n                id\n                name\n            }\n            subSchool {\n                id\n                name\n            }\n            subject \n            credit\n            content\n            createUserid{\n                teacher{\n                    familyName\n                    name\n                }\n            }\n        }\n    }\n"]))),B=((0,w.Ps)(s||(s=(0,T.Z)(["\n    query allTeacherStatuss {\n        allTeacherStatuss {\n            id\n            name\n        }\n    }\n"]))),(0,w.Ps)(i||(i=(0,T.Z)(["\n    query allStudentStatuss {\n        allStudentStatuss {\n            id\n            name\n        }\n    }\n"]))),(0,w.Ps)(r||(r=(0,T.Z)(["\n    query allStudentStatusExtras {\n        allStudentStatusExtras {\n            id\n            name\n        }\n    }\n"]))),(0,w.Ps)(o||(o=(0,T.Z)(["\n    query allUsers {\n        allUsers {\n            id\n            username\n            email\n        }\n    }\n"])))),A=((0,w.Ps)(l||(l=(0,T.Z)(["\n    query userByUsername($username: String!) {\n        userByUsername(username: $username) {\n            id\n            username\n        }\n    }\n"]))),(0,w.Ps)(d||(d=(0,T.Z)(["\n    query employeesAttandanceByRange ($startDate: DateTime!, $endDate: DateTime!) {\n        employeesAttandanceByRange (startDate: $startDate, endDate: $endDate) {\n            id\n            isIn\n            isOut\n            timeIn\n            timeOut\n            user {\n                id\n                isTeacher\n                isEmployee\n                teacher {\n                    familyName\n                    name\n                    teacherCode\n                }\n                employee {\n                    familyName\n                    name\n                    employeeCode\n                }\n                groups {\n                    name\n                }\n            }\n        }\n    }\n"])))),k=((0,w.Ps)(c||(c=(0,T.Z)(["\n    query allAttendaceEmployees {\n        allAttendaceEmployees {\n            username\n            email\n            isTeacher\n            isEmployee\n            teacher {\n                teacherCode\n                familyName\n                name\n            }\n            employee {\n                employeeCode\n                familyName\n                name\n            }\n        }\n    }\n"]))),(0,w.Ps)(u||(u=(0,T.Z)(["\n    query allEmployeesCompartment {\n        allEmployeesCompartment {\n            id\n            name\n        }\n    }\n"])))),H=(0,w.Ps)(m||(m=(0,T.Z)(["\n    query allEmployees ($filter: String) {\n        allEmployees (filter: $filter) {\n            id\n            user {\n                id\n                username\n                email\n                groups {\n                    name\n                }\n            }\n            compartment {\n                id\n                name\n            }\n            employeeCode\n            familyName\n            name\n            registerNo\n            photo\n            phone\n            phone2\n            address\n            sex\n            birthdate\n            birthCity {\n                id\n            }\n            birthDistrict {\n                id\n            }\n            status {\n                id\n            }\n        }\n    }\n"]))),M=(0,w.Ps)(f||(f=(0,T.Z)(["\n  \tquery allTeachers ($offset: Int!, $limit: Int!, $filter: String) {\n        allTeachers (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            user {\n                id\n                username\n                email\n            }\n            teacherCode\n            degree{\n                id\n            }\n            access\n            familyName\n            name\n            registerNo\n            photo\n            phone\n            phone2\n            address\n            joinDate\n            joinBefore\n            sex\n            birthdate\n            birthCity {\n                id\n                name\n            }\n            birthDistrict {\n                id\n                name\n            }\n            status {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            subSchool {\n                id\n                name\n            }\n        }\n\t}\n"]))),Y=(0,w.Ps)(y||(y=(0,T.Z)(["\n  \tquery allStudents ($filter: String, $program: Int, $classes: Int, $section: Int) {\n        allStudents (filter: $filter, program: $program, classes: $classes, section: $section) {\n            id\n            user {\n                id\n                username\n                email\n            }\n            studentCode\n            surname\n            familyName\n            name\n            religion\n            registerNo\n            nationality\n            state\n            photo\n            phone\n            address\n            bodyIndex\n            vaccine\n            drug\n            allergies\n            underlyingDisease\n            bloodType\n            etc\n            activity {\n                id\n                name\n            }\n            joinDate\n            sex\n            birthdate\n            classtime {\n                id\n                name\n            }\n            birthCity {\n                id\n                name\n            }\n            birthDistrict {\n                id\n                name\n            }\n            status {\n                id\n                name\n            }\n            statusExtra {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            classes {\n                id\n                classes\n            }\n            section {\n                id\n                section\n            }\n            program {\n                id\n                program\n            }\n            joinSchoolyear {\n                id\n                schoolyear\n            }\n        }\n    }\n"]))),O=(0,w.Ps)(h||(h=(0,T.Z)(["\n  \tquery allCitys{\n        allCitys {\n            id\n            name\n            code\n        }\n\t}\n"]))),F=(0,w.Ps)(p||(p=(0,T.Z)(["\n    query allDistricts {\n        allDistricts {\n            id\n            code\n            name\n            cityID {\n                id\n                name\n            }\n        }\n    }\n"]))),U=(0,w.Ps)(g||(g=(0,T.Z)(["\n  \tquery allPrograms{\n        allPrograms {\n            id\n            program\n            programMgl\n            maxStudentNum\n            school {\n                id\n                name\n            }\n            subSchool {\n                id\n                name\n            }\n            status\n            createdAt\n            updatedAt\n        }\n\t  }\n"]))),z=(0,w.Ps)(S||(S=(0,T.Z)(["\n  \tquery allSchools {\n        allSchools {\n            id\n            name\n            nameMgl\n        }\n\t}\n"]))),V=(0,w.Ps)($||($=(0,T.Z)(["\n  \tquery allSubSchools{\n        allSubSchools {\n            id\n            name\n            nameMgl\n            school {\n                id\n                name\n            }\n\t\t}\n\t}\n"]))),R=(0,w.Ps)(x||(x=(0,T.Z)(["\n    query allSections {\n        allSections {\n            id\n            section\n            classes {\n                id\n                classes\n            }\n            program {\n                id\n                program\n            }\n            teacher{\n                id\n            }\n            program {\n                id\n                program\n            }\n            subSchool {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]))),_=(0,w.Ps)(Z||(Z=(0,T.Z)(["\n    query allClassess ($program: Int!, $offset: Int!, $limit: Int!, $filter: String) {\n        allClassess (program: $program, offset: $offset, limit: $limit, filter: $filter) {\n            id\n            classes\n            # classesNumeric\n            activity {\n                id\n                name\n            }\n            program {\n                id\n                program\n            }\n            subSchool {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            status\n            sectionSet {\n                id\n                section\n                classes {\n                    id\n                    classes\n                }\n                program {\n                    id\n                    program\n                }\n                subSchool {\n                    id\n                    name\n                }\n                school {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]))),K=(0,w.Ps)(v||(v=(0,T.Z)(["\n    query allClasstimes {\n        allClasstimes {\n            id\n            name\n        }\n    }\n"]))),J=(0,w.Ps)(b||(b=(0,T.Z)(["\n    query allSchoolyears {\n        allSchoolyears {\n            id\n            schoolyear\n        }\n    }\n"]))),Q=(0,w.Ps)(P||(P=(0,T.Z)(["\n    query allParents ($offset: Int!, $limit: Int!, $filter: String) {\n        allParents (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            familyName\n            name\n            profession\n            phone\n            address\n            student {\n                id\n                studentCode\n                familyName\n                name\n            }\n        }\n    }\n"]))),W=(0,w.Ps)(C||(C=(0,T.Z)(["\n    query sectionsByClasses ($classes: Int!) {\n        sectionsByClasses (classes: $classes) {\n            id\n            section\n            maxStudentNum\n            teacher{\n                name\n                id\n            }\n            classes {\n                id\n                classes\n            }\n            program {\n                id\n                program\n            }\n            subSchool {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n        }\n    }\n"]))),G=(0,w.Ps)(D||(D=(0,T.Z)(["\n    query transfersByStudent ($student: Int!) {\n        transfersByStudent (student: $student) {\n            id\n            student {\n                familyName\n                name\n                photo\n                studentCode\n            }\n            school {\n                id\n                name\n            }\n            program {\n                id\n                program\n            }\n            classes {\n                id\n                classes\n            }\n            section {\n                id\n                section\n            }\n            status {\n                id\n                name\n            }\n            statusExtra {\n                id\n                name\n            }\n            classtime {\n                id\n                name\n            }\n            activity {\n                id\n                name\n            }\n            docDate\n            docNum\n            description\n            oldData\n        }\n    }\n"]))),L=(0,w.Ps)(N||(N=(0,T.Z)(["\n    query allEventTypes {\n        allEventTypes {\n            id\n            name\n            color\n        }\n    }\n"]))),X=(0,w.Ps)(j||(j=(0,T.Z)(["\n    query allEvents {\n        allEvents {\n            id\n            title\n            description\n            content\n            startAt\n            endAt\n            eventType {\n                id\n                name\n                color\n            }\n        }\n    } \n"]))),nn=((0,w.Ps)(q||(q=(0,T.Z)(["\n    query allEventsByType ($id: Int!) {\n        allEventsByType (id: $id) {\n            id\n            title\n            description\n            content\n            startAt\n            endAt\n            eventType\n        }\n    }\n"]))),(0,w.Ps)(I||(I=(0,T.Z)(['\n    query allStudentsPagination ($page: Int, $perPage: Int, $filter: String = "") {\n        allStudentsPagination (page: $page, perPage: $perPage, filter: $filter) {\n            page\n            perPage\n            pageCount\n            totalCount\n            records {\n                id\n                user {\n                    id\n                    username\n                    email\n                }\n                studentCode\n                surname\n                familyName\n                name\n                religion\n                registerNo\n                nationality\n                state\n                photo\n                phone\n                address\n                activity {\n                    id\n                    name\n                }\n                joinDate\n                sex\n                birthdate\n                classtime {\n                    id\n                    name\n                }\n                birthCity {\n                    id\n                    name\n                }\n                birthDistrict {\n                    id\n                    name\n                }\n                status {\n                    id\n                    name\n                }\n                statusExtra {\n                    id\n                    name\n                }\n                school {\n                    id\n                    name\n                }\n                classes {\n                    id\n                    classes\n                }\n                section {\n                    id\n                    section\n                }\n                program {\n                    id\n                    program\n                }\n                joinSchoolyear {\n                    id\n                    schoolyear\n                }\n            }\n        }\n    }\n']))))},93838:function(n,e,t){t.r(e),t.d(e,{default:function(){return w}});var a,s,i=t(29439),r=t(93433),o=t(72791),l=t(96578),d=t(84376),c=t(87309),u=t(50419),m=t(66871),f=t(20003),y=t(70163),h=t(71381),p=t(41920),g=t(2703),S=t(82630),$=t(30168),x=t(27570),Z=(0,x.Ps)(a||(a=(0,$.Z)(["\n    query studentHandoverByDate ($date: Date, $student: ID) {\n        studentHandoverByDate (date: $date, student: $student) {\n            code\n            isSuccessed\n            isNotified\n        }\n    }\n"]))),v=(0,x.Ps)(s||(s=(0,$.Z)(["\n    mutation setHandOverSuccessed ($code: String!) {\n        setHandOverSuccessed (code: $code) {\n            handOver {\n                isSuccessed\n            }\n        }\n    }\n"]))),b=t(72426),P=t.n(b),C=t(68470),D=t(38937),N=t(63330),j=t(59288),q=t(53719),I=t(80184);function T(n){var e=n.date,t=n.student,a=n.setHandOverData,s=n.toggleModalVisibility,i=n.index,o=(n.records,n.setRecords);var d=(0,l.a)(Z,{variables:{date:e,student:t},pollInterval:1e4,onCompleted:function(n){n.studentHandoverByDate.isNotified&&function(n,e){o((function(e){var t=(0,r.Z)(e),a=t.splice(n,1)[0];return t.unshift(a),t}))}(i)}}),u=d.data;return d.loading?(0,I.jsx)(D.Z,{}):(0,I.jsx)(c.Z,{className:(0,g.AK)(u.studentHandoverByDate.isSuccessed?"bg-green-500":u.studentHandoverByDate.isNotified?"bg-yellow-500":"bg-red-500"),onClick:function(){return s(),void a(u.studentHandoverByDate)},type:"text",icon:(0,I.jsx)(N.Z,{className:"h-6 w-6 mx-auto text-white"})})}function w(){var n=(0,o.useContext)(q.S).user,e=(0,o.useState)(1),t=(0,i.Z)(e,2),a=t[0],s=t[1],r=(0,o.useState)(!0===n.isTeacher?100:10),$=(0,i.Z)(r,2),x=$[0],Z=$[1],b=(0,o.useState)(P()().format("YYYY-MM-DD")),D=(0,i.Z)(b,2),N=D[0],w=D[1],E=(0,o.useState)(!1),B=(0,i.Z)(E,2),A=B[0],k=B[1],H=(0,o.useState)({}),M=(0,i.Z)(H,2),Y=M[0],O=M[1],F=(0,o.useState)([]),U=(0,i.Z)(F,2),z=U[0],V=U[1],R={change_handover:(0,j.C)("change_handover")},_=(0,l.a)(p.A9,{variables:{page:a,perPage:x,filter:""},onCompleted:function(n){V(n.allStudentsPagination.records)}}),K=_.data,J=_.loading,Q=(0,d.D)(v,{onCompleted:function(n){u.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439"),X()}}),W=(0,i.Z)(Q,2),G=W[0],L=W[1].loading;function X(){k((function(n){return!n}))}var nn=[{key:"studentCode",title:(0,I.jsx)(S.Z,{id:"studentCode"}),dataIndex:"studentCode",width:"8vw",sorter:function(n,e){return g.ZP.antdTableSorter(n,e,"studentCode")}},{key:"classes",title:(0,I.jsx)(S.Z,{id:"classes"}),dataIndex:["classes","classes"],width:"10vw",sorter:function(n,e){return g.ZP.antdTableSorter(n,e,"classes")},render:function(n,e){return(0,I.jsxs)("span",{children:[e.classes.classes," - ",e.section.section," ",(0,I.jsx)("br",{})]})}},{key:"familyName",title:(0,I.jsx)(S.Z,{id:"familyName"}),dataIndex:"familyName",width:"10vw",sorter:function(n,e){return g.ZP.antdTableSorter(n,e,"familyName")}},{key:"name",title:(0,I.jsx)(S.Z,{id:"name"}),dataIndex:"name",width:"10vw",sorter:function(n,e){return g.ZP.antdTableSorter(n,e,"name")}},{key:"id",dataIndex:"id",width:"25px",render:function(n,e,t){return(0,I.jsx)(T,{student:n,date:N,setHandOverData:O,toggleModalVisibility:X,index:t,records:z,setRecords:V})}}];return(0,I.jsxs)(m.Z,{children:[(0,I.jsx)(f.Z,{visible:A,onCancel:X,footer:(0,I.jsxs)(I.Fragment,{children:[R.change_handover&&(0,I.jsx)(c.Z,{onClick:function(){return G({variables:{code:Y.code}})},type:"default",loading:L,children:"\u0411\u0430\u0442\u0430\u043b\u0433\u0430\u0430\u0436\u0443\u0443\u043b\u0430\u0445"}),(0,I.jsx)(c.Z,{onClick:X,type:"primary",children:"\u0425\u0430\u0430\u0445"})]}),children:(0,I.jsxs)("div",{className:"text-center",children:[(0,I.jsx)("img",{className:"m-auto",alt:"qrcode",src:"https://chart.googleapis.com/chart?chs=177x177&cht=qr&chl=".concat(Y.code,"&chld=H&choe=UTF-8")}),(0,I.jsx)("span",{children:Y.code})]})}),(0,I.jsx)(C.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:(0,I.jsx)(C.Z,{className:"mb-1",mobileFlex:!1,children:(0,I.jsx)("div",{className:"mr-md-3 mb-3",children:(0,I.jsx)(y.Z,{defaultValue:P()(),onChange:function(n){var e;(e=n)&&w(P()(e).format("YYYY-MM-DD"))}})})})}),(0,I.jsx)(h.Z,{size:"small",columns:nn,dataSource:z,rowKey:"id",bordered:!0,loading:J,pagination:{current:a,pageSize:x,showSizeChanger:!0,total:null===K||void 0===K?void 0:K.allStudentsPagination.totalCount},onChange:function(n,e,t){s(n.current),Z(n.pageSize)}})]})}}}]);
//# sourceMappingURL=3838.c99ab9fe.chunk.js.map