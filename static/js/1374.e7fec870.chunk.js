"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[1374],{68470:function(n,e,t){t(72791);var i=t(80184),s=function(n){var e=n.children,t=n.className,s=n.alignItems,l=n.justifyContent,o=n.mobileFlex,r=n.flexDirection;return(0,i.jsx)("div",{className:"".concat(o?"d-flex":"d-md-flex"," ").concat(t," ").concat(r?"flex-"+r:""," ").concat(s?"align-items-"+s:""," ").concat(l?"justify-content-"+l:""),children:e})};s.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},e.Z=s},25566:function(n,e,t){t.d(e,{$A:function(){return K},Ap:function(){return k},Ho:function(){return z},K_:function(){return M},ND:function(){return G},S8:function(){return H},U7:function(){return D},Vv:function(){return w},bb:function(){return v},ds:function(){return A},eX:function(){return E},iZ:function(){return X},j$:function(){return _},kZ:function(){return B},mq:function(){return q},oJ:function(){return J},q$:function(){return C},sZ:function(){return L},u$:function(){return T},vX:function(){return U},zN:function(){return N}});var i,s,l,o,r,a,d,u,c,m,f,$,Z,x,y,S,p,h,j,g,b,F,I,O=t(30168),P=t(27570),L=(0,P.Ps)(i||(i=(0,O.Z)(["\n    query allOnlineTypes {\n        allOnlineTypes {\n            id\n            name\n        }\n    }\n\n"]))),C=(0,P.Ps)(s||(s=(0,O.Z)(["\n    query allOnlineFiles ($folder: Int){\n        allOnlineFiles (folder: $folder){\n            id\n            file\n        }\n    }\n"]))),N=(0,P.Ps)(l||(l=(0,O.Z)(["\n    query allFolders ($folder: Int){\n        allFolders(folder: $folder){\n            id\n            name\n        }\n    }\n    "]))),v=(0,P.Ps)(o||(o=(0,O.Z)(["\n    mutation createOnlineFile($file: Upload!, $folder: Int) {\n        createOnlineFile(file: $file, folder: $folder) {\n            onlineFile {\n                id\n                file\n            }\n        }\n    }\n"]))),T=(0,P.Ps)(r||(r=(0,O.Z)(["\n    mutation createOnlineFileFolder($name: String, $subFolder: Int){\n        createOnlineFileFolder(name: $name, subFolder: $subFolder){\n            onlineFileFolder{\n                id\n            }\n        }\n    }\n"]))),q=(0,P.Ps)(a||(a=(0,O.Z)(["\n    mutation deleteOnlineFile ($id: ID) {\n        deleteOnlineFile (id: $id) {\n            onlineFile {\n                file\n            }\n        }\n    }\n"]))),k=(0,P.Ps)(d||(d=(0,O.Z)(["\n    mutation deleteOnlineFileFolder ($id: Int){\n        deleteOnlineFileFolder (id: $id){\n            onlineFileFolder {\n                name\n            }\n        }\n    }\n"]))),D=(0,P.Ps)(u||(u=(0,O.Z)(["\n    mutation createOnlineLesson ($description: String, $schoolyear: Int, $status: String) {\n        createOnlineLesson (description: $description, schoolyear: $schoolyear, status: $status) {\n            onlineLesson {\n                id\n            }\n        }\n    }\n"]))),B=(0,P.Ps)(c||(c=(0,O.Z)(["\n    mutation updateOnlineLesson ($description: String, $id: ID, $schoolyear: Int, $status: String) {\n        updateOnlineLesson (description: $description, id: $id, schoolyear: $schoolyear, status: $status) {\n            onlineLesson {\n                id\n            }\n        }\n    }\n"]))),w=(0,P.Ps)(m||(m=(0,O.Z)(['\n    query allOnlineLessons ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "online_lesson", modelName: "Online_lesson", filter: $filter) {\n            count\n        }\n        allOnlineLessons (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            schoolyear {\n                id\n                schoolyear\n            }\n            description\n            status\n            createUserid {\n                isTeacher\n                teacher {\n                    name\n                }\n            }\n        }\n    }\n']))),E=(0,P.Ps)(f||(f=(0,O.Z)(["\n    query onlineLessonById ($id: Int!) {\n        onlineLessonById (id: $id) {\n            id\n            schoolyear {\n                schoolyear\n                id\n            }\n            description\n            status\n        }\n    }\n"]))),_=(0,P.Ps)($||($=(0,O.Z)(["\n    mutation deleteOnlineLesson ($id: ID) {\n        deleteOnlineLesson (id: $id) {\n            onlineLesson {\n                status\n            }\n        }\n    }\n"]))),A=(0,P.Ps)(Z||(Z=(0,O.Z)(["\n    query allOnlineSubByLesson ($onlineLesson: Int!) {\n        allOnlineSubByLesson (onlineLesson: $onlineLesson) {\n            id\n            title\n            description\n            createUserid {\n                isTeacher\n                teacher {\n                    name\n                }\n            }\n            onlineType {\n                id\n                name\n            }\n            onlineSubFileSet {\n                onlineFile {\n                    id\n                    file\n                }\n            }\n            status\n        }\n    }\n"]))),U=(0,P.Ps)(x||(x=(0,O.Z)(["\n    mutation createOnlineSub ($description: String, $onlineLesson: Int, $status: String, $title: String, $onlineType: Int) {\n        createOnlineSub (description: $description, onlineLesson: $onlineLesson, status: $status, title: $title, onlineType: $onlineType) {\n            onlineSub {\n                id\n            }\n        }\n    }\n"]))),M=(0,P.Ps)(y||(y=(0,O.Z)(["\n    mutation updateOnlineSub ( $description: String, $id: ID, $onlineLesson: Int, $status: String, $title: String, $onlineType: Int) {\n        updateOnlineSub (description: $description, id: $id, onlineLesson: $onlineLesson, status: $status, title: $title, onlineType: $onlineType) {\n            onlineSub {\n                id\n            }\n        }\n    }\n"]))),X=(0,P.Ps)(S||(S=(0,O.Z)(["\n    mutation deleteOnlineSub ($id: ID) {\n        deleteOnlineSub (id: $id) {\n            onlineSub {\n                title\n            }\n        }\n    }\n"]))),J=(0,P.Ps)(p||(p=(0,O.Z)(["\n    query onlineSubById ($id: Int!) {\n        onlineSubById (id: $id) {\n            title\n            description\n            onlineSubFileSet {\n                onlineFile {\n                    id\n                    file\n                }\n            }\n            onlineType {\n                id\n                name\n            }\n            onlineAttendanceSet {\n                student {\n                    id\n                    studentCode\n                    name\n                    familyName\n                }\n            }\n            status\n            createdAt\n        }\n    } \n"]))),z=(0,P.Ps)(h||(h=(0,O.Z)(["\n    mutation createOnlineStudent ($onlineLesson: Int, $studentCode: String, $section: Int) {\n        createOnlineStudent (onlineLesson: $onlineLesson, studentCode: $studentCode, section: $section) {\n            onlineStudent {\n                id\n            }\n        }\n    }\n"]))),G=(0,P.Ps)(j||(j=(0,O.Z)(["\n    mutation deleteOnlineStudent ($id: ID) {\n        deleteOnlineStudent (id: $id) {\n            onlineStudent {\n                student {\n                    name\n                }\n            }\n        }\n    }\n"]))),H=(0,P.Ps)(g||(g=(0,O.Z)(["\n    query allOnlineStudentByLesson ($onlineLesson: Int!) {\n        allOnlineStudentByLesson (onlineLesson: $onlineLesson) {\n            id\n            student {\n                id\n                familyName\n                name\n                studentCode\n            }\n        }\n    }\n"]))),K=((0,P.Ps)(b||(b=(0,O.Z)(["\n    query allOnlineSubFiles ($onlineSub: Int) {\n        allOnlineSubFiles (onlineSub: $onlineSub) {\n            id\n            onlineFile {\n                id\n                file\n            }\n        }\n    }\n"]))),(0,P.Ps)(F||(F=(0,O.Z)(["\n    mutation createOnlineSubFile ($onlineFile: Int, $onlineSub: Int) {\n        createOnlineSubFile (onlineFile: $onlineFile, onlineSub: $onlineSub) {\n            onlineSubFile {\n                id\n            }\n        }\n    }\n"]))));(0,P.Ps)(I||(I=(0,O.Z)(["\n    mutation deleteOnlineSubFile ($id: Int) {\n        deleteOnlineSubFile (id: $id) {\n            onlineSubFile {\n                id\n            }\n        }\n    }\n"])))},68694:function(n,e,t){t.d(e,{Cm:function(){return Z},Cx:function(){return f},FQ:function(){return $},JX:function(){return m},dT:function(){return x},gt:function(){return S},tL:function(){return y}});var i,s,l,o,r,a,d,u=t(30168),c=t(27570),m=(0,c.Ps)(i||(i=(0,u.Z)(["\n    query allStudents ($filter: String) {\n        allStudents (filter: $filter) {\n            id\n            familyName\n            name\n            studentCode\n        }\n\t}\n"]))),f=(0,c.Ps)(s||(s=(0,u.Z)(["\n    query allTeachers ($filter: String) {\n        allTeachers (filter: $filter) {\n            id\n            familyName\n            name\n            teacherCode\n        }\n    }\n"]))),$=(0,c.Ps)(l||(l=(0,u.Z)(["\n    query allClassess ($filter: String, $program: Int) {\n        allClassess (filter: $filter, program: $program) {\n            id\n            classes\n        }\n\t}\n"]))),Z=(0,c.Ps)(o||(o=(0,u.Z)(['\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "subject", modelName: "Subject", filter: $filter) {\n            count\n        }\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            subject \n            content\n        }\n    }\n']))),x=(0,c.Ps)(r||(r=(0,u.Z)(["\n    query selectProgram {\n        allPrograms {\n            id\n            program\n        }\n    }\n"]))),y=(0,c.Ps)(a||(a=(0,u.Z)(["\n    query sectionsByProgram ($program: Int!) {\n        sectionsByProgram (program: $program) {\n            id\n            section \n            classes {\n                classes\n            }\n        }\n    }\n"]))),S=(0,c.Ps)(d||(d=(0,u.Z)(["\n    query sectionsByClasses ($classes: Int!){\n        sectionsByClasses (classes: $classes) {\n            id \n            section\n        }\n    }\n"])))},1374:function(n,e,t){t.r(e),t.d(e,{default:function(){return v}});var i=t(29439),s=t(72791),l=t(20003),o=t(50419),r=t(87309),a=t(66871),d=t(71381),u=t(82464),c=t(53834),m=t(96578),f=t(84376),$=t(38937),Z=t(25566),x=t(68470),y=t(64880),S=t(82630),p=t(86586),h=t(22949),j=t(73332),g=t(58361),b=t(66106),F=t(30914),I=t(69421),O=t(68694),P=t(80184),L=h.Z.Option,C=function(n){var e=n.submitData,t=n.mutationData,l=n.loading,o=j.Z.useForm(),d=(0,i.Z)(o,1)[0],u=j.Z.useForm(),c=(0,i.Z)(u,1)[0],f=(0,s.useState)([]),Z=(0,i.Z)(f,2),x=Z[0],y=Z[1],C=(0,s.useState)([]),N=(0,i.Z)(C,2),v=N[0],T=N[1],q=(0,s.useState)([]),k=(0,i.Z)(q,2),D=k[0],B=k[1],w=(0,m.a)(O.dT,{onCompleted:function(n){y(n.allPrograms)}}).loading,E=(0,p.t)(O.tL,{onCompleted:function(n){T(n.sectionsByProgram)}}),_=(0,i.Z)(E,2),A=_[0],U=_[1].loading,M=(0,p.t)(O.JX,{onCompleted:function(n){B(n.allStudents)}}),X=(0,i.Z)(M,2),J=X[0],z=X[1].loading,G=function(n){n.hasOwnProperty("studentCode")?n.section=0:n.studentCode="";var i=Object.assign(n,t);e({variables:i})};return(0,P.jsx)(g.Z,{active:!0,loading:w,children:(0,P.jsxs)(b.Z,{gutter:16,children:[(0,P.jsx)(F.Z,{xs:24,xl:12,children:(0,P.jsx)(a.Z,{className:"mt-4",title:(0,P.jsx)(S.Z,{id:"by-section"}),children:(0,P.jsxs)(j.Z,{id:"section",layout:"vertical",form:d,name:"control-hooks",onFinish:G,children:[(0,P.jsx)(j.Z.Item,{name:"program",label:(0,P.jsx)(S.Z,{id:"program"}),rules:[{required:!0,message:(0,P.jsx)(S.Z,{id:"form.required"})}],children:(0,P.jsx)(h.Z,{onSelect:function(n){d.setFieldsValue({section:""}),A({variables:{program:n}})},allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(n,e){return e.children.toString().toLowerCase().indexOf(n.toLowerCase())>=0},children:x.map((function(n,e){return(0,P.jsxs)(L,{value:n.id,children:[n.program," / ",n.programNumeric]},e)}))})}),(0,P.jsx)(j.Z.Item,{name:"section",label:(0,P.jsx)(S.Z,{id:"section"}),rules:[{required:!0,message:(0,P.jsx)(S.Z,{id:"form.required"})}],children:(0,P.jsx)(h.Z,{allowClear:!0,notFoundContent:U?(0,P.jsx)($.Z,{cover:"content"}):(0,P.jsx)(I.Z,{image:I.Z.PRESENTED_IMAGE_SIMPLE}),children:v.map((function(n,e){return(0,P.jsxs)(L,{value:n.id,children:[n.classes.classes," / ",n.section]},e)}))})}),(0,P.jsx)(j.Z.Item,{className:"text-right",children:(0,P.jsx)(r.Z,{className:"mr-2",type:"primary",htmlType:"submit",loading:l,children:(0,P.jsx)(S.Z,{id:"main.okText"})})})]})})}),(0,P.jsx)(F.Z,{xs:24,xl:12,children:(0,P.jsx)(a.Z,{className:"mt-4",title:(0,P.jsx)(S.Z,{id:"by-student-code"}),children:(0,P.jsxs)(j.Z,{id:"student",layout:"vertical",form:c,name:"control-hooks",onFinish:G,children:[(0,P.jsx)(j.Z.Item,{name:"studentCode",label:(0,P.jsx)(S.Z,{id:"studentCode"}),rules:[{required:!0,message:(0,P.jsx)(S.Z,{id:"form.required"})}],children:(0,P.jsx)(h.Z,{showSearch:!0,filterOption:!1,notFoundContent:z?(0,P.jsx)($.Z,{cover:"content"}):(0,P.jsx)(I.Z,{image:I.Z.PRESENTED_IMAGE_SIMPLE}),onSearch:function(n){""===n?B([]):J({variables:{offset:0,limit:99999999,filter:n}})},children:D.map((function(n,e){return(0,P.jsxs)(L,{value:n.studentCode,children:[" ",n.familyName," ",n.name," / ",n.studentCode]},e)}))})}),(0,P.jsx)(j.Z.Item,{className:"text-right",children:(0,P.jsx)(r.Z,{className:"mr-2",type:"primary",htmlType:"submit",loading:l,children:(0,P.jsx)(S.Z,{id:"main.okText"})})})]})})})]})})},N=l.Z.confirm,v=function(n){var e=(0,y.k6)(),t=(0,y.UO)().lesson,s=(0,m.a)(Z.S8,{variables:{onlineLesson:t}}),l=s.data,p=s.loading,h=s.refetch,j=(0,f.D)(Z.Ho,{onCompleted:function(n){h(),o.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430!")}}),g=(0,i.Z)(j,2),b=g[0],F=g[1].loading,I=(0,f.D)(Z.ND,{onCompleted:function(n){h(),o.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430!")}}),O=(0,i.Z)(I,2),L=O[0],v=O[1].loading,T=[{title:(0,P.jsx)(S.Z,{id:"studentCode"}),dataIndex:["student","studentCode"],key:"studentCode"},{title:(0,P.jsx)(S.Z,{id:"familyName"}),dataIndex:["student","familyName"],key:"familyName"},{title:(0,P.jsx)(S.Z,{id:"name"}),dataIndex:["student","name"],key:"name"},{title:(0,P.jsx)(S.Z,{id:"main.action"}),dataIndex:"id",key:"id",width:"30px",render:function(n,e){return(0,P.jsx)("div",{className:"text-center",children:(0,P.jsxs)(r.Z,{loading:v,size:"small",onClick:function(){return n=e.id,void N({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){L({variables:{id:n}})}});var n},type:"text",icon:(0,P.jsx)(u.Z,{twoToneColor:"#f42f2f"}),children:[" ",(0,P.jsx)(S.Z,{id:"delete"})]})})}}];return p?(0,P.jsx)($.Z,{cover:"content"}):(0,P.jsxs)("div",{children:[(0,P.jsx)(x.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:(0,P.jsx)(x.Z,{mobileFlex:!1,children:(0,P.jsx)("div",{className:"text-right",children:(0,P.jsxs)(r.Z,{onClick:function(){return e.goBack()},type:"default",icon:(0,P.jsx)(c.Z,{}),block:!0,children:[" ",(0,P.jsx)(S.Z,{id:"back"})]})})})}),(0,P.jsx)(C,{submitData:b,loading:F,mutationData:{onlineLesson:t}}),(0,P.jsx)(a.Z,{className:"mt-4",title:(0,P.jsx)(S.Z,{id:"student"}),children:(0,P.jsx)(d.Z,{className:"mt-2",columns:T,rowKey:"id",bordered:!0,pagination:!1,dataSource:l.allOnlineStudentByLesson})})]})}}}]);
//# sourceMappingURL=1374.e7fec870.chunk.js.map