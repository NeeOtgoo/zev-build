"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[4278],{68470:function(n,e,t){t(72791);var a=t(80184),i=function(n){var e=n.children,t=n.className,i=n.alignItems,r=n.justifyContent,s=n.mobileFlex,l=n.flexDirection;return(0,a.jsx)("div",{className:"".concat(s?"d-flex":"d-md-flex"," ").concat(t," ").concat(l?"flex-"+l:""," ").concat(i?"align-items-"+i:""," ").concat(r?"justify-content-"+r:""),children:e})};i.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},e.Z=i},77809:function(n,e,t){t.d(e,{$$:function(){return E},AF:function(){return B},DJ:function(){return v},PD:function(){return q},U3:function(){return M},U8:function(){return S},YZ:function(){return U},a6:function(){return F},fe:function(){return N},g5:function(){return _},h3:function(){return L},lX:function(){return Y},o7:function(){return k},oH:function(){return w},pQ:function(){return T},v3:function(){return I},vR:function(){return C},wP:function(){return A},wc:function(){return O},yy:function(){return Q}});var a,i,r,s,l,o,d,c,u,m,$,y,p,f,g,P,h,Z,b,x,D=t(30168),j=t(27570),S=(0,j.Ps)(a||(a=(0,D.Z)(["\n    query allPlans {\n        allPlans {\n            id\n            section {\n                id\n                section\n                program {\n                    id\n                }\n                classes {\n                    classes\n                }\n            }\n            approvedBy {\n                familyName\n                name\n            }\n            teacher {\n                familyName\n                name\n            }\n            startDate\n            endDate\n        }\n    }\n"]))),v=(0,j.Ps)(i||(i=(0,D.Z)(["\n    mutation createPlan ($endDate: Date, $section: ID, $startDate: Date) {\n        createPlan (endDate: $endDate, section: $section, startDate: $startDate) {\n            plan {\n                id\n            }\n        }\n    }\n"]))),A=(0,j.Ps)(r||(r=(0,D.Z)(["\n    query planById ($id: ID!) {\n        planById (id: $id) {\n            id\n            section {\n                section\n                school {\n                    name\n                }\n                classes {\n                    classes\n                }\n            }\n            approvedBy {\n                familyName\n                name\n            }\n            teacher {\n                familyName\n                name\n            }\n            startDate\n            endDate\n        }\n    }\n"]))),I=(0,j.Ps)(s||(s=(0,D.Z)(["\n    mutation updatePlan ($id: ID, $endDate: Date, $section: ID, $startDate: Date) {\n        updatePlan (id: $id, endDate: $endDate, section: $section, startDate: $startDate) {\n            plan {\n                id\n            }\n        }\n    }\n"]))),w=(0,j.Ps)(l||(l=(0,D.Z)(["\n    mutation deletePlan ($id: ID) {\n        deletePlan (id: $id) {\n            plan {\n                startDate\n            }\n        }\n    }\n"]))),C=(0,j.Ps)(o||(o=(0,D.Z)(["\n    query allDailyPlans ($plan: ID!) {\n        allDailyPlans (plan: $plan) {\n            id\n            action\n            monday\n            tuesday\n            wednesday\n            thursday\n            friday\n            isAllDay\n            allDay\n            approvedBy {\n                familyName\n                name\n            }\n        }\n    }\n"]))),k=(0,j.Ps)(d||(d=(0,D.Z)(['\n    mutation createDailyPlan (\n        $action: String\n        $allDay: String = "."\n        $friday: String = "."\n        $isAllDay: Boolean\n        $monday: String = "."\n        $plan: ID\n        $thursday: String = "."\n        $tuesday: String = "."\n        $wednesday: String = "."\n    ) {\n        createDailyPlan (\n            action: $action\n            allDay: $allDay\n            friday: $friday\n            isAllDay: $isAllDay\n            monday: $monday\n            plan: $plan\n            thursday: $thursday\n            tuesday: $tuesday\n            wednesday: $wednesday\n        ) {\n            dailyPlan {\n                id\n            }\n        }\n    }\n']))),N=(0,j.Ps)(c||(c=(0,D.Z)(['\n    mutation updateDailyPlan (\n        $action: String\n        $allDay: String = ""\n        $friday: String = ""\n        $isAllDay: Boolean\n        $monday: String = ""\n        $id: ID\n        $thursday: String = ""\n        $tuesday: String = ""\n        $wednesday: String = ""\n    ) {\n        updateDailyPlan (\n            action: $action\n            allDay: $allDay\n            friday: $friday\n            isAllDay: $isAllDay\n            monday: $monday\n            id: $id\n            thursday: $thursday\n            tuesday: $tuesday\n            wednesday: $wednesday\n        ) {\n            dailyPlan {\n                id\n            }\n        }\n    }\n']))),B=(0,j.Ps)(u||(u=(0,D.Z)(["\n    mutation deleteDailyPlan ($id: ID) {\n        deleteDailyPlan (id: $id) {\n            dailyPlan {\n                monday\n            }\n        }\n    }\n"]))),q=(0,j.Ps)(m||(m=(0,D.Z)(["\n    query allSubPlans ($plan: ID!) {\n        allSubPlans (plan: $plan) {\n            id\n            subject {\n                id\n                subject\n            }\n            content\n            goal\n            teachingMethods\n            consumables\n            walk\n            running\n            jumping\n            shoot\n            hand\n            body\n        }\n    }\n"]))),T=(0,j.Ps)($||($=(0,D.Z)(['\n    mutation createSubPlan(\n        $plan: ID\n        $subject: ID\n        $consumables: String\n        $content: String\n        $goal: String\n        $teachingMethods: String\n        $hand: String = ""\n        $jumping: String = ""\n        $running: String = ""\n        $shoot: String = ""\n        $body: String = ""\n        $walk: String = ""\n        $game: String = ""\n    ) {\n        createSubPlan (\n            body: $body\n            consumables: $consumables\n            content: $content\n            goal: $goal\n            hand: $hand\n            jumping: $jumping\n            plan: $plan\n            running: $running\n            shoot: $shoot\n            subject: $subject\n            teachingMethods: $teachingMethods\n            walk: $walk\n            game: $game\n        ) {\n            subPlan {\n                id\n            }\n        }\n    }\n']))),M=(0,j.Ps)(y||(y=(0,D.Z)(['\n    mutation updateSubPlan(\n        $id: ID\n        $subject: ID\n        $consumables: String\n        $teachingMethods: String\n        $content: String\n        $goal: String = ""\n        $hand: String = ""\n        $jumping: String = ""\n        $running: String = ""\n        $shoot: String = ""\n        $body: String = ""\n        $walk: String = ""\n        $game: String = ""\n    ) {\n        updateSubPlan (\n            body: $body\n            consumables: $consumables\n            content: $content\n            goal: $goal\n            hand: $hand\n            jumping: $jumping\n            id: $id\n            running: $running\n            shoot: $shoot\n            subject: $subject\n            teachingMethods: $teachingMethods\n            walk: $walk\n            game: $game\n        ) {\n            subPlan {\n                id\n            }\n        }\n    }\n']))),F=(0,j.Ps)(p||(p=(0,D.Z)(["\n    mutation deleteSubPlan ($id: ID) {\n        deleteSubPlan (id: $id) {\n            subPlan {\n                walk\n            }\n        }\n    }\n"]))),_=(0,j.Ps)(f||(f=(0,D.Z)(["\n    query allSubPlanActions ($subPlan: ID!) {\n        allSubPlanActions (subPlan: $subPlan) {\n            id\n            action\n            teacherActivity\n            studentActivity\n            subPlan {\n                id\n            }\n            approvedBy {\n                familyName\n                name\n            }\n        }\n    }\n"]))),Y=(0,j.Ps)(g||(g=(0,D.Z)(["\n    mutation createSubPlanAction (\n        $action: String\n        $studentActivity: String\n        $subPlan: ID\n        $teacherActivity: String\n    ) {\n        createSubPlanAction (\n            action: $action\n            studentActivity: $studentActivity\n            subPlan: $subPlan\n            teacherActivity: $teacherActivity\n        ) {\n            subPlanAction {\n                id\n            }\n        }\n    }\n"]))),U=(0,j.Ps)(P||(P=(0,D.Z)(["\n    mutation updateSubPlanAction (\n        $action: String\n        $studentActivity: String\n        $id: ID\n        $teacherActivity: String\n    ) {\n        updateSubPlanAction (\n            action: $action\n            studentActivity: $studentActivity\n            id: $id\n            teacherActivity: $teacherActivity\n        ) {\n            subPlanAction {\n                id\n            }\n        }\n    }\n"]))),E=(0,j.Ps)(h||(h=(0,D.Z)(["\n    mutation deleteSubPlanAction ($id: ID) {\n        deleteSubPlanAction (id: $id) {\n            subPlanAction {\n                action\n            }\n        }\n    }\n"]))),O=(0,j.Ps)(Z||(Z=(0,D.Z)(["\n    mutation approvePlan ($plan: ID) {\n        approvePlan (plan: $plan) {\n            plan {\n                id\n            }\n        }\n    }\n"]))),L=(0,j.Ps)(b||(b=(0,D.Z)(["\n    mutation approveDailyPlan ($dailyPlan: ID, $isApproved: Boolean) {\n        approveDailyPlan (dailyPlan: $dailyPlan, isApproved: $isApproved) {\n            dailyPlan {\n                id\n            }\n        }\n    }\n"]))),Q=(0,j.Ps)(x||(x=(0,D.Z)(["\n    mutation approveSubPlanAction ($subPlanAction: ID, $isApproved: Boolean) {\n        approveSubPlanAction (subPlanAction: $subPlanAction, isApproved: $isApproved) {\n            subPlanAction {\n                id\n            }\n        }\n    }\n"])))},68694:function(n,e,t){t.d(e,{Cm:function(){return p},Cx:function(){return $},FQ:function(){return y},JX:function(){return m},dT:function(){return f},gt:function(){return P},tL:function(){return g}});var a,i,r,s,l,o,d,c=t(30168),u=t(27570),m=(0,u.Ps)(a||(a=(0,c.Z)(["\n    query allStudents ($filter: String) {\n        allStudents (filter: $filter) {\n            id\n            familyName\n            name\n            studentCode\n        }\n\t}\n"]))),$=(0,u.Ps)(i||(i=(0,c.Z)(["\n    query allTeachers ($filter: String) {\n        allTeachers (filter: $filter) {\n            id\n            familyName\n            name\n            teacherCode\n        }\n    }\n"]))),y=(0,u.Ps)(r||(r=(0,c.Z)(["\n    query allClassess ($filter: String, $program: Int) {\n        allClassess (filter: $filter, program: $program) {\n            id\n            classes\n        }\n\t}\n"]))),p=(0,u.Ps)(s||(s=(0,c.Z)(['\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "subject", modelName: "Subject", filter: $filter) {\n            count\n        }\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            subject \n            content\n        }\n    }\n']))),f=(0,u.Ps)(l||(l=(0,c.Z)(["\n    query selectProgram {\n        allPrograms {\n            id\n            program\n        }\n    }\n"]))),g=(0,u.Ps)(o||(o=(0,c.Z)(["\n    query sectionsByProgram ($program: Int!) {\n        sectionsByProgram (program: $program) {\n            id\n            section \n            classes {\n                classes\n            }\n        }\n    }\n"]))),P=(0,u.Ps)(d||(d=(0,c.Z)(["\n    query sectionsByClasses ($classes: Int!){\n        sectionsByClasses (classes: $classes) {\n            id \n            section\n        }\n    }\n"])))},44278:function(n,e,t){t.r(e),t.d(e,{default:function(){return _}});var a=t(72791),i=t(59288),r=t(29439),s=t(20003),l=t(50419),o=t(87309),d=t(66871),c=t(49389),u=t(71381),m=t(37083),$=t(69421),y=t(24215),p=t(36795),f=t(82464),g=t(11730),P=t(31549),h=t(68470),Z=t(2703),b=t(22949),x=t(73332),D=t(70163),j=t(82630),S=t(84376),v=t(96578),A=t(86586),I=t(77809),w=t(68694),C=t(38937),k=t(72426),N=t.n(k),B=t(80184),q=b.Z.Option;var T=function(n){var e=n.setIsModalVisible,t=n.editData,i=x.Z.useForm(),s=(0,r.Z)(i,1)[0],o=(0,S.D)(I.DJ,{refetchQueries:[I.U8],onCompleted:function(n){e(!1),l.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),d=(0,r.Z)(o,2),c=d[0],u=d[1].loading,y=(0,S.D)(I.v3,{refetchQueries:[I.U8],onCompleted:function(n){e(!1),l.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),p=(0,r.Z)(y,2),f=p[0],g=p[1].loading,P=(0,v.a)(w.dT).data,h=(0,A.t)(w.tL),Z=(0,r.Z)(h,2),k=Z[0],T=Z[1],M=T.data,F=T.loading;return(0,a.useEffect)((function(){if(t.id){var n={program:t.section.program.id,section:t.section.id,startDate:N()(t.startDate),endDate:N()(t.endDate)};k({variables:{program:t.section.program.id}}),s.setFieldsValue(n)}else s.resetFields()}),[t]),(0,B.jsx)(m.Z,{spinning:u||g,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,B.jsx)(x.Z,{id:"PlanForm",layout:"vertical",form:s,name:"school",onFinish:function(n){n.startDate=N()(n.startDate).format("YYYY-MM-DD"),n.endDate=N()(n.endDate).format("YYYY-MM-DD"),t.id?(n.id=t.id,f({variables:n})):c({variables:n})},children:(0,B.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,B.jsx)(x.Z.Item,{name:"program",label:(0,B.jsx)(j.Z,{id:"program"}),rules:[{required:!0,message:(0,B.jsx)(j.Z,{id:"form.required"})}],children:(0,B.jsx)(b.Z,{onSelect:function(n){s.setFieldsValue({section:"",subject:""}),k({variables:{program:n}})},allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(n,e){return e.children.toString().toLowerCase().indexOf(n.toLowerCase())>=0},children:null===P||void 0===P?void 0:P.allPrograms.map((function(n,e){return(0,B.jsx)(q,{value:n.id,children:n.program},e)}))})}),(0,B.jsx)(x.Z.Item,{name:"section",label:(0,B.jsx)(j.Z,{id:"section"}),rules:[{required:!0,message:(0,B.jsx)(j.Z,{id:"form.required"})}],children:(0,B.jsx)(b.Z,{allowClear:!0,notFoundContent:F?(0,B.jsx)(C.Z,{cover:"content"}):(0,B.jsx)($.Z,{image:$.Z.PRESENTED_IMAGE_SIMPLE}),children:null===M||void 0===M?void 0:M.sectionsByProgram.map((function(n,e){return(0,B.jsxs)(q,{value:n.id,children:[n.classes.classes," / ",n.section]},e)}))})}),(0,B.jsx)(x.Z.Item,{name:"startDate",label:(0,B.jsx)(j.Z,{id:"startAt"}),rules:[{required:!0,message:(0,B.jsx)(j.Z,{id:"form.required"})}],children:(0,B.jsx)(D.Z,{className:"w-full"})}),(0,B.jsx)(x.Z.Item,{name:"endDate",label:(0,B.jsx)(j.Z,{id:"endAt"}),rules:[{required:!0,message:(0,B.jsx)(j.Z,{id:"form.required"})}],children:(0,B.jsx)(D.Z,{className:"w-full"})})]})})})},M=t(91523);var F=function(n){var e=n.permissions,t=(0,a.useState)([]),i=(0,r.Z)(t,2),b=i[0],x=i[1],D=(0,v.a)(I.U8,{onCompleted:function(n){x(n.allPlans)}}).loading,A=(0,a.useState)(!1),w=(0,r.Z)(A,2),C=w[0],k=w[1],N=(0,a.useState)({}),q=(0,r.Z)(N,2),F=q[0],_=q[1],Y=(0,a.useState)(""),U=(0,r.Z)(Y,2),E=U[0],O=U[1],L=s.Z.confirm,Q=(0,S.D)(I.oH,{refetchQueries:[I.U8],onCompleted:function(n){l.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),z=(0,r.Z)(Q,2),V=z[0],J=z[1].loading,R=[{key:"teacher",title:(0,B.jsx)(j.Z,{id:"teacher"}),dataIndex:"teacher",render:function(n){return(0,B.jsxs)("span",{children:[n.familyName," ",n.name]})},sorter:function(n,e){return Z.ZP.antdTableSorter(n,e,"teacher")}},{key:"approvedBy",title:(0,B.jsx)(j.Z,{id:"approvedBy"}),dataIndex:"approvedBy",render:function(n,e){var t=e.approvedBy;return t?(0,B.jsxs)("span",{children:[t.familyName," ",t.name]}):(0,B.jsx)("span",{children:"\u0411\u0430\u0442\u043b\u0430\u0433\u0434\u0430\u0430\u0433\u04af\u0439"})},sorter:function(n,e){return Z.ZP.antdTableSorter(n,e,"approvedBy")}},{key:"start_end_date",title:(0,B.jsx)(j.Z,{id:"start_end_date"}),dataIndex:"start_end_date",sorter:function(n,e){return Z.ZP.antdTableSorter(n,e,"start_end_date")},render:function(n,e){var t=e.startDate,a=e.endDate;return(0,B.jsxs)("span",{children:[t," - ",a]})}},{key:"actions",title:(0,B.jsx)(j.Z,{id:"main.action"}),width:"15vw",dataIndex:"actions",render:function(n,t){return(0,B.jsxs)("div",{className:"text-center",children:[(0,B.jsx)(M.rU,{to:"plan/".concat(t.id),children:(0,B.jsxs)(o.Z,{size:"small",type:"text",icon:(0,B.jsx)(y.Z,{}),children:[" ",(0,B.jsx)(j.Z,{id:"show"})]})}),!0===e.edit&&(0,B.jsxs)(o.Z,{size:"small",onClick:function(){return _(t),O("edit"),void k(!0)},type:"text",icon:(0,B.jsx)(p.Z,{twoToneColor:"#ffdb00"}),children:[" ",(0,B.jsx)(j.Z,{id:"edit"})," "]}),!0===e.destroy&&(0,B.jsxs)(o.Z,{size:"small",onClick:function(){return n=t,void L({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){V({variables:{id:n.id,name:n.name,nameMgl:n.nameMgl}})}});var n},type:"text",icon:(0,B.jsx)(f.Z,{twoToneColor:"#f42f2f"}),children:[" ",(0,B.jsx)(j.Z,{id:"delete"})]})]})}}];return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.Z,{forceRender:!0,title:"edit"===E?(0,B.jsx)(j.Z,{id:"edit"}):(0,B.jsx)(j.Z,{id:"add_new"}),visible:C,okText:(0,B.jsx)(j.Z,{id:"main.okText"}),cancelText:(0,B.jsx)(j.Z,{id:"main.cancelText"}),onCancel:function(){k(!1)},okButtonProps:{form:"PlanForm",key:"submit",htmlType:"submit"},children:(0,B.jsx)(T,{formType:E,setIsModalVisible:k,editData:F})}),(0,B.jsxs)(d.Z,{children:[(0,B.jsxs)(h.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[(0,B.jsx)(h.Z,{className:"mb-1",mobileFlex:!1,children:(0,B.jsx)("div",{className:"mr-md-3 mb-3",children:(0,B.jsx)(c.Z,{placeholder:"\u0425\u0430\u0439\u0445",prefix:(0,B.jsx)(g.Z,{})})})}),!0===e.create&&(0,B.jsx)("div",{className:"mr-md-3 mb-3",children:(0,B.jsxs)(o.Z,{onClick:function(){O("create"),_({}),k(!0)},type:"primary",icon:(0,B.jsx)(P.Z,{}),block:!0,children:[" ",(0,B.jsx)(j.Z,{id:"add_new"})," "]})})]}),(0,B.jsx)("div",{className:"table-responsive",children:(0,B.jsx)(u.Z,{columns:R,size:"small",dataSource:b,rowKey:"id",bordered:!0,locale:{emptyText:D||J?(0,B.jsx)(m.Z,{}):(0,B.jsx)($.Z,{})}})})]})]})},_=function(){var n={create:(0,i.C)("add_plan"),edit:(0,i.C)("change_plan"),destroy:(0,i.C)("delete_plan")};return Object.values(n).indexOf("loading")>-1?(0,B.jsx)(C.Z,{cover:"content"}):(0,B.jsx)(F,{permissions:n})}}}]);
//# sourceMappingURL=4278.02bc68ee.chunk.js.map