"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[8977],{49696:function(e,n,t){var a=t(29439),r=t(72791),s=t(20003),i=t(80184),l=(0,r.forwardRef)((function(e,n){var t,l=e.children,d=e.title,o=e.footer,c=e.formName,u=void 0===c?"form":c,m=(0,r.useState)(!1),x=(0,a.Z)(m,2),p=x[0],h=x[1];return(0,r.useImperativeHandle)(n,(function(){return{handleOpen:function(){h(!0)},handleCancel:function(){h(!1)}}})),(0,i.jsx)(s.Z,{width:1e3,title:d,visible:p,onCancel:null===(t=n.current)||void 0===t?void 0:t.handleCancel,okText:"\u0425\u0430\u0434\u0433\u0430\u043b\u0430\u0445",footer:o,cancelText:"\u0411\u043e\u043b\u0438\u0445",okButtonProps:{form:u,key:"submit",htmlType:"submit"},children:l})}));n.Z=l},77809:function(e,n,t){t.d(n,{$$:function(){return H},AF:function(){return q},DJ:function(){return D},PD:function(){return M},U3:function(){return B},U8:function(){return N},YZ:function(){return F},a6:function(){return L},fe:function(){return C},g5:function(){return _},h3:function(){return O},lX:function(){return E},o7:function(){return I},oH:function(){return w},pQ:function(){return T},v3:function(){return k},vR:function(){return A},wP:function(){return S},wc:function(){return R},yy:function(){return Q}});var a,r,s,i,l,d,o,c,u,m,x,p,h,f,b,y,g,j,v,Z,$=t(30168),P=t(27570),N=(0,P.Ps)(a||(a=(0,$.Z)(["\n    query allPlans {\n        allPlans {\n            id\n            section {\n                id\n                section\n                program {\n                    id\n                }\n                classes {\n                    classes\n                }\n            }\n            approvedBy {\n                familyName\n                name\n            }\n            teacher {\n                familyName\n                name\n            }\n            startDate\n            endDate\n        }\n    }\n"]))),D=(0,P.Ps)(r||(r=(0,$.Z)(["\n    mutation createPlan ($endDate: Date, $section: ID, $startDate: Date) {\n        createPlan (endDate: $endDate, section: $section, startDate: $startDate) {\n            plan {\n                id\n            }\n        }\n    }\n"]))),S=(0,P.Ps)(s||(s=(0,$.Z)(["\n    query planById ($id: ID!) {\n        planById (id: $id) {\n            id\n            section {\n                section\n                school {\n                    name\n                }\n                classes {\n                    classes\n                }\n            }\n            approvedBy {\n                familyName\n                name\n            }\n            teacher {\n                familyName\n                name\n            }\n            startDate\n            endDate\n        }\n    }\n"]))),k=(0,P.Ps)(i||(i=(0,$.Z)(["\n    mutation updatePlan ($id: ID, $endDate: Date, $section: ID, $startDate: Date) {\n        updatePlan (id: $id, endDate: $endDate, section: $section, startDate: $startDate) {\n            plan {\n                id\n            }\n        }\n    }\n"]))),w=(0,P.Ps)(l||(l=(0,$.Z)(["\n    mutation deletePlan ($id: ID) {\n        deletePlan (id: $id) {\n            plan {\n                startDate\n            }\n        }\n    }\n"]))),A=(0,P.Ps)(d||(d=(0,$.Z)(["\n    query allDailyPlans ($plan: ID!) {\n        allDailyPlans (plan: $plan) {\n            id\n            action\n            monday\n            tuesday\n            wednesday\n            thursday\n            friday\n            isAllDay\n            allDay\n            approvedBy {\n                familyName\n                name\n            }\n        }\n    }\n"]))),I=(0,P.Ps)(o||(o=(0,$.Z)(['\n    mutation createDailyPlan (\n        $action: String\n        $allDay: String = "."\n        $friday: String = "."\n        $isAllDay: Boolean\n        $monday: String = "."\n        $plan: ID\n        $thursday: String = "."\n        $tuesday: String = "."\n        $wednesday: String = "."\n    ) {\n        createDailyPlan (\n            action: $action\n            allDay: $allDay\n            friday: $friday\n            isAllDay: $isAllDay\n            monday: $monday\n            plan: $plan\n            thursday: $thursday\n            tuesday: $tuesday\n            wednesday: $wednesday\n        ) {\n            dailyPlan {\n                id\n            }\n        }\n    }\n']))),C=(0,P.Ps)(c||(c=(0,$.Z)(['\n    mutation updateDailyPlan (\n        $action: String\n        $allDay: String = ""\n        $friday: String = ""\n        $isAllDay: Boolean\n        $monday: String = ""\n        $id: ID\n        $thursday: String = ""\n        $tuesday: String = ""\n        $wednesday: String = ""\n    ) {\n        updateDailyPlan (\n            action: $action\n            allDay: $allDay\n            friday: $friday\n            isAllDay: $isAllDay\n            monday: $monday\n            id: $id\n            thursday: $thursday\n            tuesday: $tuesday\n            wednesday: $wednesday\n        ) {\n            dailyPlan {\n                id\n            }\n        }\n    }\n']))),q=(0,P.Ps)(u||(u=(0,$.Z)(["\n    mutation deleteDailyPlan ($id: ID) {\n        deleteDailyPlan (id: $id) {\n            dailyPlan {\n                monday\n            }\n        }\n    }\n"]))),M=(0,P.Ps)(m||(m=(0,$.Z)(["\n    query allSubPlans ($plan: ID!) {\n        allSubPlans (plan: $plan) {\n            id\n            subject {\n                id\n                subject\n            }\n            content\n            goal\n            teachingMethods\n            consumables\n            walk\n            running\n            jumping\n            shoot\n            hand\n            body\n        }\n    }\n"]))),T=(0,P.Ps)(x||(x=(0,$.Z)(['\n    mutation createSubPlan(\n        $plan: ID\n        $subject: ID\n        $consumables: String\n        $content: String\n        $goal: String\n        $teachingMethods: String\n        $hand: String = ""\n        $jumping: String = ""\n        $running: String = ""\n        $shoot: String = ""\n        $body: String = ""\n        $walk: String = ""\n        $game: String = ""\n    ) {\n        createSubPlan (\n            body: $body\n            consumables: $consumables\n            content: $content\n            goal: $goal\n            hand: $hand\n            jumping: $jumping\n            plan: $plan\n            running: $running\n            shoot: $shoot\n            subject: $subject\n            teachingMethods: $teachingMethods\n            walk: $walk\n            game: $game\n        ) {\n            subPlan {\n                id\n            }\n        }\n    }\n']))),B=(0,P.Ps)(p||(p=(0,$.Z)(['\n    mutation updateSubPlan(\n        $id: ID\n        $subject: ID\n        $consumables: String\n        $teachingMethods: String\n        $content: String\n        $goal: String = ""\n        $hand: String = ""\n        $jumping: String = ""\n        $running: String = ""\n        $shoot: String = ""\n        $body: String = ""\n        $walk: String = ""\n        $game: String = ""\n    ) {\n        updateSubPlan (\n            body: $body\n            consumables: $consumables\n            content: $content\n            goal: $goal\n            hand: $hand\n            jumping: $jumping\n            id: $id\n            running: $running\n            shoot: $shoot\n            subject: $subject\n            teachingMethods: $teachingMethods\n            walk: $walk\n            game: $game\n        ) {\n            subPlan {\n                id\n            }\n        }\n    }\n']))),L=(0,P.Ps)(h||(h=(0,$.Z)(["\n    mutation deleteSubPlan ($id: ID) {\n        deleteSubPlan (id: $id) {\n            subPlan {\n                walk\n            }\n        }\n    }\n"]))),_=(0,P.Ps)(f||(f=(0,$.Z)(["\n    query allSubPlanActions ($subPlan: ID!) {\n        allSubPlanActions (subPlan: $subPlan) {\n            id\n            action\n            teacherActivity\n            studentActivity\n            subPlan {\n                id\n            }\n            approvedBy {\n                familyName\n                name\n            }\n        }\n    }\n"]))),E=(0,P.Ps)(b||(b=(0,$.Z)(["\n    mutation createSubPlanAction (\n        $action: String\n        $studentActivity: String\n        $subPlan: ID\n        $teacherActivity: String\n    ) {\n        createSubPlanAction (\n            action: $action\n            studentActivity: $studentActivity\n            subPlan: $subPlan\n            teacherActivity: $teacherActivity\n        ) {\n            subPlanAction {\n                id\n            }\n        }\n    }\n"]))),F=(0,P.Ps)(y||(y=(0,$.Z)(["\n    mutation updateSubPlanAction (\n        $action: String\n        $studentActivity: String\n        $id: ID\n        $teacherActivity: String\n    ) {\n        updateSubPlanAction (\n            action: $action\n            studentActivity: $studentActivity\n            id: $id\n            teacherActivity: $teacherActivity\n        ) {\n            subPlanAction {\n                id\n            }\n        }\n    }\n"]))),H=(0,P.Ps)(g||(g=(0,$.Z)(["\n    mutation deleteSubPlanAction ($id: ID) {\n        deleteSubPlanAction (id: $id) {\n            subPlanAction {\n                action\n            }\n        }\n    }\n"]))),R=(0,P.Ps)(j||(j=(0,$.Z)(["\n    mutation approvePlan ($plan: ID) {\n        approvePlan (plan: $plan) {\n            plan {\n                id\n            }\n        }\n    }\n"]))),O=(0,P.Ps)(v||(v=(0,$.Z)(["\n    mutation approveDailyPlan ($dailyPlan: ID, $isApproved: Boolean) {\n        approveDailyPlan (dailyPlan: $dailyPlan, isApproved: $isApproved) {\n            dailyPlan {\n                id\n            }\n        }\n    }\n"]))),Q=(0,P.Ps)(Z||(Z=(0,$.Z)(["\n    mutation approveSubPlanAction ($subPlanAction: ID, $isApproved: Boolean) {\n        approveSubPlanAction (subPlanAction: $subPlanAction, isApproved: $isApproved) {\n            subPlanAction {\n                id\n            }\n        }\n    }\n"])))},68694:function(e,n,t){t.d(n,{Cm:function(){return h},Cx:function(){return x},FQ:function(){return p},JX:function(){return m},dT:function(){return f},gt:function(){return y},tL:function(){return b}});var a,r,s,i,l,d,o,c=t(30168),u=t(27570),m=(0,u.Ps)(a||(a=(0,c.Z)(["\n    query allStudents ($filter: String) {\n        allStudents (filter: $filter) {\n            id\n            familyName\n            name\n            studentCode\n        }\n\t}\n"]))),x=(0,u.Ps)(r||(r=(0,c.Z)(["\n    query allTeachers ($filter: String) {\n        allTeachers (filter: $filter) {\n            id\n            familyName\n            name\n            teacherCode\n        }\n    }\n"]))),p=(0,u.Ps)(s||(s=(0,c.Z)(["\n    query allClassess ($filter: String, $program: Int) {\n        allClassess (filter: $filter, program: $program) {\n            id\n            classes\n        }\n\t}\n"]))),h=(0,u.Ps)(i||(i=(0,c.Z)(['\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "subject", modelName: "Subject", filter: $filter) {\n            count\n        }\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            subject \n            content\n        }\n    }\n']))),f=(0,u.Ps)(l||(l=(0,c.Z)(["\n    query selectProgram {\n        allPrograms {\n            id\n            program\n        }\n    }\n"]))),b=(0,u.Ps)(d||(d=(0,c.Z)(["\n    query sectionsByProgram ($program: Int!) {\n        sectionsByProgram (program: $program) {\n            id\n            section \n            classes {\n                classes\n            }\n        }\n    }\n"]))),y=(0,u.Ps)(o||(o=(0,c.Z)(["\n    query sectionsByClasses ($classes: Int!){\n        sectionsByClasses (classes: $classes) {\n            id \n            section\n        }\n    }\n"])))},68977:function(e,n,t){t.r(n),t.d(n,{default:function(){return W}});var a=t(29439),r=t(72791),s=t(96578),i=t(84376),l=t(87309),d=t(53834),o=t(67575),c=t(31549),u=t(78803),m=t(49696),x=t(38937),p=t(82630),h=t(77809),f=t(64880),b=t(91523),y=t(61146),g=t(20003),j=t(32014),v=t(50419),Z=t(82464),$=t(41732),P=t(73332),N=t(37083),D=t(49389),S=t(46246),k=t.n(S),w=t(80184);var A=function(e){var n=e.closeModal,t=e.selectedData,s=e.subPlan,l=P.Z.useForm(),d=(0,a.Z)(l,1)[0],o=(0,i.D)(h.lX,{refetchQueries:[{query:h.g5,variables:{subPlan:s}}],onCompleted:function(e){n(),v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),c=(0,a.Z)(o,2),u=c[0],m=c[1].loading,x=(0,i.D)(h.YZ,{refetchQueries:[{query:h.g5,variables:{subPlan:s}}],onCompleted:function(e){n(),v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),f=(0,a.Z)(x,2),b=f[0],y=f[1].loading;return(0,r.useEffect)((function(){if(t.id){var e={action:t.action,teacherActivity:k().createEditorState(t.teacherActivity),studentActivity:k().createEditorState(t.studentActivity)};d.setFieldsValue(e)}else d.resetFields()}),[t,d]),(0,w.jsx)(N.Z,{spinning:m||y,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,w.jsxs)(P.Z,{id:"subPlanActionForm",layout:"vertical",form:d,name:"subPlanActionForm",onFinish:function(e){e.subPlan=s,e.teacherActivity=e.teacherActivity.toHTML(),e.studentActivity=e.studentActivity.toHTML(),t.id?(e.id=t.id,b({variables:e})):u({variables:e})},children:[(0,w.jsx)(P.Z.Item,{name:"action",label:"\u04ae\u0439\u043b \u0430\u0436\u0438\u043b\u043b\u0430\u0433\u0430\u0430",rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})},{max:100,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z,{})}),(0,w.jsx)(P.Z.Item,{name:"teacherActivity",label:"\u0411\u0430\u0433\u0448\u0438\u0439\u043d \u0434\u044d\u043c\u0436\u043b\u044d\u0433, \u0447\u0438\u0433\u043b\u04af\u04af\u043b\u044d\u0433",rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})}),(0,w.jsx)(P.Z.Item,{name:"studentActivity",label:"\u0425\u04af\u04af\u0445\u0434\u0438\u0439\u043d \u04af\u0439\u043b \u0430\u0436\u0438\u043b\u043b\u0430\u0433\u0430\u0430",rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})})]})})},I=t(2703),C=g.Z.confirm,q=function(e){var n=e.onActionRowClick,t=e.item,s=e.onDelete,l=e.permissions,d=(0,r.useState)({x:0,y:0}),o=(0,a.Z)(d,2),c=o[0],u=o[1],m=(0,r.useState)(!1),x=(0,a.Z)(m,2),p=x[0],f=x[1],b=(0,r.useRef)(),y=(0,i.D)(h.yy,{refetchQueries:[{query:h.g5,variables:{subPlan:t.subPlan.id}}]}),g=(0,a.Z)(y,2),v=g[0],$=g[1].loading;return(0,r.useEffect)((function(){function e(){f(!1)}var n=function(n){b.current&&!b.current.contains(n.target)&&e&&e()};return document.addEventListener("contextmenu",n,!0),document.addEventListener("click",n,!0),function(){document.removeEventListener("contextmenu",n,!0),document.addEventListener("click",n,!0)}}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("tr",{className:"border-b hover:cursor-pointer break-after-auto break-inside-avoid",onContextMenuCapture:function(e){e.preventDefault(),l.delete&&(f(!0),u({x:e.pageX,y:e.pageY}))},onClick:function(){return n(t)},children:[(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",children:t.action}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.teacherActivity}}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.studentActivity}}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:hidden",onClick:function(e){return l.approve_plan&&e&&e.stopPropagation&&e.stopPropagation()},children:l.approve_plan?(0,w.jsx)(j.Z,{onChange:function(e){return function(e){v({variables:{subPlanAction:t.id,isApproved:e.target.checked}})}(e)},disabled:$,checked:!!t.approvedBy,children:t.approvedBy?"\u0411\u0430\u0442\u0430\u043b\u0441\u0430\u043d":"\u0411\u0430\u0442\u043b\u0430\u0433\u0434\u0430\u0430\u0433\u04af\u0439"}):(0,w.jsx)("span",{children:t.approvedBy?"\u0411\u0430\u0442\u0430\u043b\u0441\u0430\u043d":"\u0411\u0430\u0442\u043b\u0430\u0433\u0434\u0430\u0430\u0433\u04af\u0439"})})]}),p&&(0,w.jsx)("tr",{ref:b,className:(0,I.AK)(p?"absolute":"hidden"," z-10"),style:{top:c.y,left:c.x},children:(0,w.jsx)("td",{className:"bg-white w-60 border border-gray-300 rounded-lg flex flex-col text-sm py-4 px-2 text-gray-500",children:(0,w.jsxs)("div",{className:"flex py-1 px-2 rounded hover:bg-background hover:cursor-pointer",onClick:function(){return s(t.id)},children:[(0,w.jsx)("div",{className:"w-8",children:(0,w.jsx)(Z.Z,{twoToneColor:"#eb2f96"},"delete")}),(0,w.jsx)("div",{children:"\u0423\u0441\u0442\u0433\u0430\u0445"})]})})})]})},M=function(e){var n=e.data,t=e.permissions,l=e.teacher,d=e.onClick,o=(0,f.UO)().id,c=(0,r.useState)({}),u=(0,a.Z)(c,2),x=u[0],p=u[1],b=(0,r.useState)({x:0,y:0}),y=(0,a.Z)(b,2),g=y[0],j=y[1],P=(0,r.useState)(!1),N=(0,a.Z)(P,2),D=N[0],S=N[1],k=(0,r.useRef)(),M=(0,r.useRef)(),T=(0,s.a)(h.g5,{variables:{subPlan:n.id}}),B=T.data,L=T.refetch,_=(0,i.D)(h.a6,{refetchQueries:[{query:h.PD,variables:{plan:o}}],onCompleted:function(e){v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),E=(0,a.Z)(_,1)[0],F=(0,i.D)(h.$$,{onCompleted:function(e){v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430"),L()}}),H=(0,a.Z)(F,1)[0];function R(e){C({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){H({variables:{id:e}})}})}function O(e){t.edit&&(p(e),k.current.handleOpen())}return(0,r.useEffect)((function(){function e(){S(!1)}var n=function(n){M.current&&!M.current.contains(n.target)&&e&&e()};return document.addEventListener("contextmenu",n,!0),document.addEventListener("click",n,!0),function(){document.removeEventListener("contextmenu",n,!0),document.addEventListener("click",n,!0)}}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.Z,{ref:k,formName:"subPlanActionForm",children:(0,w.jsx)(A,{subPlan:n.id,selectedData:x,closeModal:function(){k.current.handleCancel()}})}),(0,w.jsxs)("div",{className:"hover:cursor-pointer",onContextMenuCapture:function(e){e.preventDefault(),t.delete&&(S(!0),j({x:e.pageX,y:e.pageY}))},children:[(0,w.jsxs)("div",{onClick:function(){return d(n)},children:[n.subject.subject&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u0421\u0443\u0440\u0430\u043b\u0446\u0430\u0445\u0443\u0439\u043d \u0447\u0438\u0433\u043b\u044d\u043b: ",n.subject.subject]}),n.content&&(0,w.jsxs)("div",{className:"flex flex-row justify-",children:[(0,w.jsx)("div",{className:"font-bold text-black pr-1",children:"\u0410\u0433\u0443\u0443\u043b\u0433\u0430:"}),(0,w.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})]}),n.walk&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u0410\u043b\u0445\u0430\u043b\u0442: ",n.walk]}),n.running&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u0413\u04af\u0439\u043b\u0442: ",n.running]}),n.jumping&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u04ae\u0441\u0440\u044d\u043b\u0442: ",n.jumping]}),n.shoot&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u0428\u0438\u0434\u044d\u043b\u0442: ",n.shoot]}),n.game&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u0413\u0430\u0440 \u0445\u0443\u0440\u0443\u0443\u043d\u044b \u0445\u04e9\u0434\u04e9\u043b\u0433\u04e9\u04e9\u043d\u04e9\u04e9 \u0437\u043e\u0445\u0438\u0446\u0443\u0443\u043b\u043d\u0430: ",n.hand]}),n.body&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u0411\u0438\u0435 \u0445\u04e9\u0433\u0436\u04af\u04af\u043b\u044d\u0445 \u0434\u0430\u0441\u0433\u0430\u043b: ",n.body]}),n.game&&(0,w.jsxs)("div",{className:"font-bold text-black whitespace-pre-line",children:["\u0422\u043e\u0433\u043b\u043e\u043e\u043c: ",n.game]}),n.goal&&(0,w.jsxs)("div",{className:"flex flex-row",children:[(0,w.jsx)("div",{className:"font-bold text-black pr-1",children:"\u0417\u043e\u0440\u0438\u043b\u0433\u043e:"}),(0,w.jsx)("div",{dangerouslySetInnerHTML:{__html:n.goal}})]}),n.teachingMethods&&(0,w.jsxs)("div",{className:"flex flex-row",children:[(0,w.jsx)("div",{className:"font-bold text-black pr-1",children:"\u0417\u0430\u0430\u0445 \u0430\u0440\u0433\u0430:"}),(0,w.jsx)("div",{dangerouslySetInnerHTML:{__html:n.teachingMethods}})]}),n.consumables&&(0,w.jsxs)("div",{className:"flex flex-row",children:[(0,w.jsx)("div",{className:"font-bold text-black pr-1",children:"\u0425\u044d\u0440\u044d\u0433\u043b\u044d\u0433\u0434\u044d\u0445\u04af\u04af\u043d:"}),(0,w.jsx)("div",{dangerouslySetInnerHTML:{__html:n.consumables}})]})]}),(0,w.jsx)("div",{ref:M,className:(0,I.AK)(D?"absolute":"hidden"," z-10"),style:{top:g.y,left:g.x},children:(0,w.jsx)("div",{className:"bg-white w-60 border border-gray-300 rounded-lg flex flex-col text-sm py-4 px-2 text-gray-500",children:(0,w.jsxs)("div",{className:"flex py-1 px-2 rounded hover:bg-background hover:cursor-pointer",onClick:function(){return function(e){C({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){E({variables:{id:e}})}})}(n.id)},children:[(0,w.jsx)("div",{className:"w-8",children:(0,w.jsx)(Z.Z,{twoToneColor:"#eb2f96"},"delete")}),(0,w.jsx)("div",{children:"\u0423\u0441\u0442\u0433\u0430\u0445"})]})})})]}),(0,w.jsx)("div",{className:"flex flex-col",children:(0,w.jsx)("div",{className:"sm:-mx-6 lg:-mx-8",children:(0,w.jsx)("div",{className:"py-2 inline-block min-w-full print:block sm:px-6 lg:px-8",children:(0,w.jsx)("div",{className:"",children:(0,w.jsxs)("table",{className:"w-full table-fixed border text-center print:break-before-all",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"border-b",children:[(0,w.jsx)("td",{className:"px-6 py-4  text-sm font-bold text-gray-900 border-r",children:"\u04ae\u0439\u043b \u0430\u0436\u0438\u043b\u043b\u0430\u0433\u0430\u0430"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r",children:"\u0411\u0430\u0433\u0448\u0438\u0439\u043d \u0434\u044d\u043c\u0436\u043b\u044d\u0433, \u0447\u0438\u0433\u043b\u04af\u04af\u043b\u044d\u0433"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r",children:"\u0425\u04af\u04af\u0445\u0434\u0438\u0439\u043d \u04af\u0439\u043b \u0430\u0436\u0438\u043b\u043b\u0430\u0433\u0430\u0430"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r print:hidden",children:"\u0422\u04e9\u043b\u04e9\u0432"})]})}),(0,w.jsxs)("tbody",{children:[null===B||void 0===B?void 0:B.allSubPlanActions.map((function(e,n){return(0,w.jsx)(q,{item:e,permissions:t,onDelete:R,onActionRowClick:O},n)})),t.create&&(0,w.jsx)("tr",{className:"bg-white border-b print:hidden",children:(0,w.jsx)("td",{className:"px-6 py-4  font-bold text-gray-900 border-r",colSpan:4,children:(0,w.jsx)($.Z,{className:"h-6 m-auto hover:cursor-pointer",onClick:function(){t.create&&(p({}),k.current.handleOpen())}})})})]})]})})})})}),(0,w.jsxs)("div",{className:"flex justify-center",children:[(0,w.jsx)("p",{className:"mr-40 text-black",children:"\u0422\u04e9\u043b\u04e9\u0432\u043b\u04e9\u0433\u04e9\u04e9 \u0431\u043e\u043b\u043e\u0432\u0441\u0440\u0443\u0443\u043b\u0441\u0430\u043d \u0431\u0430\u0433\u0448:"}),(0,w.jsx)("p",{className:"text-black",children:l})]})]})},T=t(59288),B=t(72426),L=t.n(B),_=t(1413),E=t(22949),F=E.Z.Option;var H=function(e){var n=e.closeModal,t=e.selectedData,s=P.Z.useForm(),l=(0,a.Z)(s,1)[0],d=(0,f.UO)().id,o=(0,i.D)(h.o7,{refetchQueries:[{query:h.vR,variables:{plan:d}}],onCompleted:function(e){n(),v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),c=(0,a.Z)(o,2),u=c[0],m=c[1].loading,x=(0,i.D)(h.fe,{refetchQueries:[{query:h.vR,variables:{plan:d}}],onCompleted:function(e){n(),v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),b=(0,a.Z)(x,2),y=b[0],g=b[1].loading;return(0,r.useEffect)((function(){if(t.id){var e=(0,_.Z)({action:t.action,isAllDay:t.isAllDay},t.allDay?{allDay:k().createEditorState(t.allDay)}:{monday:k().createEditorState(t.monday),tuesday:k().createEditorState(t.tuesday),wednesday:k().createEditorState(t.wednesday),thursday:k().createEditorState(t.thursday),friday:k().createEditorState(t.friday)});l.setFieldsValue(e)}else l.resetFields()}),[t]),(0,w.jsx)(N.Z,{spinning:m||g,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,w.jsxs)(P.Z,{id:"dailyPlanForm",layout:"vertical",form:l,name:"dailyPlanForm",onFinish:function(e){e.plan=d,e.isAllDay?e.allDay=e.allDay.toHTML():(e.monday=e.monday.toHTML(),e.tuesday=e.tuesday.toHTML(),e.wednesday=e.wednesday.toHTML(),e.thursday=e.thursday.toHTML(),e.friday=e.friday.toHTML()),t.id?(e.id=t.id,y({variables:e})):u({variables:e})},children:[(0,w.jsx)(P.Z.Item,{name:"action",label:"\u04ae\u0439\u043b \u0430\u0436\u0438\u043b\u043b\u0430\u0433\u0430\u0430",rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})},{max:50,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z,{})}),(0,w.jsx)(P.Z.Item,{name:"isAllDay",label:(0,w.jsx)(p.Z,{id:"isAllDay"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsxs)(E.Z,{children:[(0,w.jsx)(F,{value:!0,children:"\u0411\u04af\u0445 \u04e9\u0434\u04e9\u0440"}),(0,w.jsx)(F,{value:!1,children:"\u04e8\u0434\u04e9\u0440 \u04e9\u0434\u0440\u04e9\u04e9\u0440"})]})}),(0,w.jsx)(P.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.isAllDay!==n.isAllDay},children:function(e){return!0===(0,e.getFieldValue)("isAllDay")?(0,w.jsx)(P.Z.Item,{name:"allDay",label:(0,w.jsx)(p.Z,{id:"allDay"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(P.Z.Item,{name:"monday",label:(0,w.jsx)(p.Z,{id:"monday"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})}),(0,w.jsx)(P.Z.Item,{name:"tuesday",label:(0,w.jsx)(p.Z,{id:"tuesday"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})}),(0,w.jsx)(P.Z.Item,{name:"wednesday",label:(0,w.jsx)(p.Z,{id:"wednesday"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})}),(0,w.jsx)(P.Z.Item,{name:"thursday",label:(0,w.jsx)(p.Z,{id:"thursday"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})}),(0,w.jsx)(P.Z.Item,{name:"friday",label:(0,w.jsx)(p.Z,{id:"friday"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})})]})}})]})})},R=g.Z.confirm,O=function(e){var n=e.onRowClick,t=e.item,s=e.permissions,l=(0,r.useState)({x:0,y:0}),d=(0,a.Z)(l,2),o=d[0],c=d[1],u=(0,r.useState)(!1),m=(0,a.Z)(u,2),x=m[0],p=m[1],b=(0,r.useRef)(),y=(0,f.UO)().id,g=(0,i.D)(h.AF,{refetchQueries:[{query:h.vR,variables:{plan:y}}],onCompleted:function(e){v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),$=(0,a.Z)(g,1)[0],P=(0,i.D)(h.h3,{refetchQueries:[{query:h.vR,variables:{plan:y}}]}),N=(0,a.Z)(P,2),D=N[0],S=N[1].loading;function k(e){D({variables:{dailyPlan:t.id,isApproved:e.target.checked}})}return(0,r.useEffect)((function(){function e(){p(!1)}var n=function(n){b.current&&!b.current.contains(n.target)&&e&&e()};return document.addEventListener("contextmenu",n,!0),document.addEventListener("click",n,!0),function(){document.removeEventListener("contextmenu",n,!0),document.addEventListener("click",n,!0)}}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("tr",{className:"border-b hover:cursor-pointer break-after-auto break-inside-avoid",onContextMenuCapture:function(e){e.preventDefault(),s.delete&&(p(!0),c({x:e.pageX,y:e.pageY}))},onClick:function(){return n(t)},children:[(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",children:t.action}),t.isAllDay?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.allDay},colSpan:5}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:hidden",onClick:function(e){return s.approve_plan&&e&&e.stopPropagation&&e.stopPropagation()},children:s.approve_plan?(0,w.jsx)(j.Z,{onChange:function(e){return k(e)},disabled:S,checked:!!t.approvedBy,children:t.approvedBy?"\u0411\u0430\u0442\u0430\u043b\u0441\u0430\u043d":"\u0411\u0430\u0442\u043b\u0430\u0433\u0434\u0430\u0430\u0433\u04af\u0439"}):(0,w.jsx)("span",{children:t.approvedBy?"\u0411\u0430\u0442\u0430\u043b\u0441\u0430\u043d":"\u0411\u0430\u0442\u043b\u0430\u0433\u0434\u0430\u0430\u0433\u04af\u0439"})})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.monday}}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.tuesday}}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.wednesday}}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.thursday}}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:break-before-auto",dangerouslySetInnerHTML:{__html:t.friday}}),(0,w.jsx)("td",{className:"text-sm text-gray-900 border-r print:hidden",onClick:function(e){return s.approve_plan&&e&&e.stopPropagation&&e.stopPropagation()},children:s.approve_plan?(0,w.jsx)(j.Z,{onChange:function(e){return k(e)},disabled:S,checked:!!t.approvedBy,children:t.approvedBy?"\u0411\u0430\u0442\u0430\u043b\u0441\u0430\u043d":"\u0411\u0430\u0442\u043b\u0430\u0433\u0434\u0430\u0430\u0433\u04af\u0439"}):(0,w.jsx)("span",{children:t.approvedBy?"\u0411\u0430\u0442\u0430\u043b\u0441\u0430\u043d":"\u0411\u0430\u0442\u043b\u0430\u0433\u0434\u0430\u0430\u0433\u04af\u0439"})})]})]}),x&&(0,w.jsx)("tr",{ref:b,className:"absolute z-10",style:{top:o.y,left:o.x},children:(0,w.jsx)("td",{className:"bg-white w-60 border border-gray-300 rounded-lg flex flex-col text-sm py-4 px-2 text-gray-500",children:(0,w.jsxs)("div",{className:"flex py-1 px-2 rounded hover:bg-background hover:cursor-pointer",onClick:function(){return function(e){R({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){$({variables:{id:e}})}})}(t.id)},children:[(0,w.jsx)("div",{className:"w-8",children:(0,w.jsx)(Z.Z,{twoToneColor:"#eb2f96"},"delete")}),(0,w.jsx)("div",{children:"\u0423\u0441\u0442\u0433\u0430\u0445"})]})})})]})},Q=function(e){var n=e.data,t=void 0===n?[]:n,s=e.permissions,i=(0,r.useState)({}),l=(0,a.Z)(i,2),d=l[0],o=l[1],c=(0,r.useRef)();function u(e){s.edit&&(o(e),c.current.handleOpen())}return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.Z,{ref:c,formName:"dailyPlanForm",children:(0,w.jsx)(H,{subPlan:t.id,selectedData:d,closeModal:function(){c.current.handleCancel()}})}),(0,w.jsx)("div",{className:"flex flex-col",children:(0,w.jsx)("div",{className:"sm:-mx-6 lg:-mx-8",children:(0,w.jsx)("div",{className:"py-2 inline-block min-w-full print:block sm:px-6 lg:px-8",children:(0,w.jsx)("div",{className:"",children:(0,w.jsxs)("table",{className:"w-full table-fixed border text-center print:break-before-all",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"border-b",children:[(0,w.jsx)("td",{className:"px-6 py-4  text-sm font-bold text-gray-900 border-r",children:"\u04ae\u0439\u043b \u0430\u0436\u0438\u043b\u043b\u0430\u0433\u0430\u0430"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r",children:"\u0414\u0430\u0432\u0430\u0430"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r",children:"\u041c\u044f\u0433\u043c\u0430\u0440"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r",children:"\u041b\u0445\u0430\u0433\u0432\u0430"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r",children:"\u041f\u04af\u0440\u044d\u0432"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r",children:"\u0411\u0430\u0430\u0441\u0430\u043d"}),(0,w.jsx)("td",{className:"text-sm text-gray-900 font-bold px-6 py-4 border-r print:hidden",children:"\u0422\u04e9\u043b\u04e9\u0432"})]})}),(0,w.jsxs)("tbody",{children:[t.map((function(e,n){return(0,w.jsx)(O,{onRowClick:u,item:e,permissions:s},n)})),s.create&&(0,w.jsx)("tr",{className:"bg-white border-b print:hidden",children:(0,w.jsx)("td",{className:"px-6 py-4  font-bold text-gray-900 border-r",colSpan:7,children:(0,w.jsx)($.Z,{className:"h-6 m-auto hover:cursor-pointer",onClick:function(){s.create&&(o({}),c.current.handleOpen())}})})})]})]})})})})})]})},Y=t(66106),U=t(30914),X=t(69421),V=t(86586),z=t(68694),J=E.Z.Option;var K=function(e){var n=e.closeModal,t=e.selectedData,s=e.plan,l=P.Z.useForm(),d=(0,a.Z)(l,1)[0],o=(0,r.useState)([]),c=(0,a.Z)(o,2),u=c[0],m=c[1],f=(0,i.D)(h.pQ,{refetchQueries:[{query:h.PD,variables:{plan:s}}],onCompleted:function(e){n(),v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),b=(0,a.Z)(f,2),y=b[0],g=b[1].loading,j=(0,i.D)(h.U3,{refetchQueries:[{query:h.PD,variables:{plan:s}}],onCompleted:function(e){n(),v.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),Z=(0,a.Z)(j,2),$=Z[0],S=Z[1].loading,A=(0,V.t)(z.Cm,{onCompleted:function(e){m(e.allSubjects)}}),I=(0,a.Z)(A,2),C=I[0],q=I[1].loading;return(0,r.useEffect)((function(){if(t.id){C({variables:{offset:0,limit:99999999,filter:t.subject.subject}});var e={subject:t.subject.id,hand:t.hand,jumping:t.jumping,running:t.running,shoot:t.shoot,body:t.body,walk:t.walk,game:t.game,consumables:k().createEditorState(t.consumables),teachingMethods:k().createEditorState(t.teachingMethods),goal:k().createEditorState(t.goal),content:k().createEditorState(t.content)};d.setFieldsValue(e)}else d.resetFields()}),[t]),(0,w.jsx)(N.Z,{spinning:g||S,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,w.jsx)(P.Z,{id:"subPlanForm",layout:"vertical",form:d,name:"subPlanForm",onFinish:function(e){e.plan=s,e.consumables=e.consumables.toHTML(),e.content=e.content.toHTML(),e.goal=e.goal.toHTML(),e.teachingMethods=e.teachingMethods.toHTML(),t.id?(e.id=t.id,$({variables:e})):y({variables:e})},children:(0,w.jsxs)(Y.Z,{gutter:[24,24],children:[(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"subject",label:(0,w.jsx)(p.Z,{id:"subject"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(E.Z,{showSearch:!0,filterOption:!1,notFoundContent:q?(0,w.jsx)(x.Z,{cover:"content"}):(0,w.jsx)(X.Z,{image:X.Z.PRESENTED_IMAGE_SIMPLE}),onSearch:function(e){""===e?m([]):C({variables:{offset:0,limit:99999999,filter:e}})},children:u.map((function(e,n){return(0,w.jsxs)(J,{value:e.id,children:[" ",e.subject]},n)}))})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"hand",label:(0,w.jsx)(p.Z,{id:"hand"}),rules:[{max:150,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z.TextArea,{rows:1})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"jumping",label:(0,w.jsx)(p.Z,{id:"jumping"}),rules:[{max:150,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z.TextArea,{rows:1})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"running",label:(0,w.jsx)(p.Z,{id:"running"}),rules:[{max:150,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z.TextArea,{rows:1})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"shoot",label:(0,w.jsx)(p.Z,{id:"shoot"}),rules:[{max:150,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z.TextArea,{rows:1})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"body",label:(0,w.jsx)(p.Z,{id:"body"}),rules:[{max:150,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z.TextArea,{rows:1})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"walk",label:(0,w.jsx)(p.Z,{id:"walk"}),rules:[{max:150,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z.TextArea,{rows:1})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"game",label:(0,w.jsx)(p.Z,{id:"game"}),rules:[{max:150,message:(0,w.jsx)(p.Z,{id:"form.max"})}],children:(0,w.jsx)(D.Z.TextArea,{rows:1})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"consumables",label:(0,w.jsx)(p.Z,{id:"consumables"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"content",label:(0,w.jsx)(p.Z,{id:"content"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"goal",label:(0,w.jsx)(p.Z,{id:"goal"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})})}),(0,w.jsx)(U.Z,{xs:24,xl:12,children:(0,w.jsx)(P.Z.Item,{name:"teachingMethods",label:(0,w.jsx)(p.Z,{id:"teachingMethods"}),rules:[{required:!0,message:(0,w.jsx)(p.Z,{id:"form.required"})}],children:(0,w.jsx)(k(),{className:"border rounded-2",language:"en"})})})]})})})},G=(0,r.forwardRef)((function(e,n){var t,a,r=e.data,s=e.permissions,i=e.subPlans,l=e.dailyPlans,d=e.handleSubEdit;return(0,w.jsxs)("div",{className:"bg-white rounded-4 p-2",ref:n,children:[(0,w.jsxs)("div",{className:"flex flex-row justify-end",children:[(0,w.jsx)("h4",{className:"text-black font-bold mr-40",children:"\u0411\u0410\u0422\u041b\u0410\u0412: "}),(0,w.jsxs)("h4",{className:" text-black font-bold",children:[null===(t=r.planById.approvedBy)||void 0===t?void 0:t.familyName," ",null===(a=r.planById.approvedBy)||void 0===a?void 0:a.name]})]}),(0,w.jsx)("div",{children:(0,w.jsxs)("h4",{className:"text-center text-black uppercase",children:[r.planById.section.school.name," ",r.planById.section.classes.classes,"-",r.planById.section.section," \u0431\u04af\u043b\u0433\u0438\u0439\u043d ",(0,w.jsx)("br",{}),L()(r.planById.startDate).format("YYYY.MM.DD"),"-",L()(r.planById.endDate).format("YYYY.MM.DD")," \u0425\u04ae\u0420\u0422\u042d\u041b\u0425 \u04ae\u0419\u041b \u0410\u0416\u0418\u041b\u041b\u0410\u0413\u0410\u0410\u041d\u042b \u0422\u04e8\u041b\u04e8\u0412\u041b\u04e8\u041b\u0422"]})}),(0,w.jsx)(Q,{data:null===l||void 0===l?void 0:l.allDailyPlans,permissions:s}),(0,w.jsxs)("div",{className:"flex justify-center",children:[(0,w.jsx)("p",{className:"mr-40 text-black",children:"\u0422\u04e9\u043b\u04e9\u0432\u043b\u04e9\u0433\u04e9\u04e9 \u0431\u043e\u043b\u043e\u0432\u0441\u0440\u0443\u0443\u043b\u0441\u0430\u043d \u0431\u0430\u0433\u0448:"}),(0,w.jsx)("p",{className:"text-black",children:"".concat(r.planById.teacher.familyName," ").concat(r.planById.teacher.name)})]}),null===i||void 0===i?void 0:i.allSubPlans.map((function(e,n){return(0,w.jsx)(M,{onClick:d,data:e,permissions:s,teacher:"".concat(r.planById.teacher.familyName," ").concat(r.planById.teacher.name)},n)}))]})})),W=function(){var e=(0,f.UO)().id,n=(0,r.useRef)(),t=(0,r.useRef)(),g=(0,r.useState)({}),j=(0,a.Z)(g,2),v=j[0],Z=j[1],$=(0,s.a)(h.wP,{variables:{id:e}}),P=$.data,N=$.loading,D=$.error,S=(0,s.a)(h.vR,{variables:{plan:e}}).data,k=(0,s.a)(h.PD,{variables:{plan:e}}).data,A=(0,i.D)(h.wc,{refetchQueries:[{query:h.wP,variables:{id:e}},{query:h.vR,variables:{plan:e}},{query:h.PD,variables:{plan:e}}]}),I=(0,a.Z)(A,1)[0],C={create:(0,T.C)("add_plan"),edit:(0,T.C)("change_plan"),delete:(0,T.C)("delete_plan"),approve_plan:(0,T.C)("approve_plan")},q=(0,y.useReactToPrint)({content:function(){return n.current}});return N?(0,w.jsx)(x.Z,{cover:"content"}):D?(0,w.jsx)("section",{className:"bg-white ",children:(0,w.jsx)("div",{className:"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6",children:(0,w.jsxs)("div",{className:"mx-auto max-w-screen-sm text-center",children:[(0,w.jsx)("h1",{className:"mb-4 text-7xl tracking-tight font-extrabold lg:text-9xl text-emind-600 ",children:"404"}),(0,w.jsx)("p",{className:"mb-4 text-3xl tracking-tight font-bold text-emind-600 md:text-4xl ",children:"\u0425\u0443\u0443\u0434\u0430\u0441 \u043e\u043b\u0434\u0441\u043e\u043d\u0433\u04af\u0439."}),(0,w.jsx)("p",{className:"mb-4 text-lg font-light text-gray-500 ",children:"\u0423\u0443\u0447\u043b\u0430\u0430\u0440\u0430\u0439, \u0431\u0438\u0434 \u044d\u043d\u044d \u0445\u0443\u0443\u0434\u0441\u044b\u0433 \u043e\u043b\u0436 \u0447\u0430\u0434\u0441\u0430\u043d\u0433\u04af\u0439. "}),(0,w.jsx)(b.rU,{to:"/app/plan",className:"inline-flex bg-emind text-white hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center my-4",children:"\u0411\u0443\u0446\u0430\u0445"})]})})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.Z,{ref:t,formName:"subPlanForm",children:(0,w.jsx)(K,{plan:e,selectedData:v,closeModal:function(){t.current.handleCancel()}})}),(0,w.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,w.jsx)("div",{children:(0,w.jsx)(b.rU,{to:"/app/plan",children:(0,w.jsxs)(l.Z,{type:"default",icon:(0,w.jsx)(d.Z,{}),children:[" ",(0,w.jsx)(p.Z,{id:"back"})," "]})})}),(0,w.jsxs)("div",{children:[!P.planById.approvedBy&&C.approve_plan&&(0,w.jsx)(l.Z,{className:"mr-4 bg-green-400 border-green-200",onClick:function(){I({variables:{plan:e}})},type:"primary",icon:(0,w.jsx)(o.Z,{}),children:" \u0411\u0430\u0442\u043b\u0430\u0445 "}),C.create&&(0,w.jsx)(l.Z,{className:"mr-4 bg-slate-400 border-slate-200",onClick:function(){C.create&&(Z({}),t.current.handleOpen())},type:"primary",icon:(0,w.jsx)(c.Z,{}),children:" \u0422\u04e9\u043b\u04e9\u0432\u043b\u04e9\u0433\u04e9\u04e9 \u043d\u044d\u043c\u044d\u0445 "}),(0,w.jsxs)(l.Z,{onClick:q,type:"primary",icon:(0,w.jsx)(u.Z,{}),children:[" ",(0,w.jsx)(p.Z,{id:"print"})," "]})]})]}),(0,w.jsx)("div",{ref:n,children:(0,w.jsx)(G,{data:P,subPlans:k,dailyPlans:S,permissions:C,handleSubEdit:function(e){C.edit&&(Z(e),t.current.handleOpen())}})})]})}}}]);
//# sourceMappingURL=8977.83df0f3b.chunk.js.map