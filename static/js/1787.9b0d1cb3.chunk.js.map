{"version":3,"file":"static/js/1787.9b0d1cb3.chunk.js","mappings":"yWAaMA,GAASC,EAAAA,EAAAA,IAAG,oXAmBLC,EAAY,SAAAC,GACxB,IAAIC,GAAUC,EAAAA,EAAAA,MAEd,GAA0BC,EAAAA,EAAAA,YAAWC,EAAAA,GAA7BC,EAAI,EAAJA,KAAMC,EAAO,EAAPA,QACRC,EAAQC,aAAaC,QAAQC,EAAAA,IACnC,GAAsCC,EAAAA,EAAAA,WAAS,GAAM,eAA9CC,EAAW,KAAEC,EAAc,KAUlC,OAA+BC,EAAAA,EAAAA,GAAYjB,EAAQ,CAClDkB,YAAa,SAAAC,GACZ,IACM,IADEA,EAAKC,UAAUC,QAErBC,EAAAA,GAAAA,QAAgB,kHAChBX,aAAaY,QAAQV,EAAAA,GAAYM,EAAKC,UAAUV,OAChDD,SATHO,GAAe,EAef,IACC,eAbKQ,EAAO,KAAIC,EAAO,KAAPA,QA2BlB,OAZGV,GACFW,YAAW,WAvBXV,GAAe,EAyBf,GAAG,MAGJW,EAAAA,EAAAA,YAAU,WACLjB,GAASF,GACZJ,EAAQwB,KAAK,YAEf,GAAG,CAACpB,EAAME,EAAON,KAGhB,iCACC,SAAC,SAAU,CACVyB,QAAS,CAAEC,QAAS,EAAGC,aAAc,GACrCC,QAAS,CACRF,QAASf,EAAc,EAAI,EAC3BgB,aAAchB,EAAc,GAAK,GAChC,UACF,SAAC,IAAK,CAACkB,KAAK,QAAQC,UAAQ,EAACZ,SAAS,SAACa,EAAA,EAAW,CAACC,GAAG,oBAEvD,UAAC,IAAI,CACJC,OAAO,WACPC,KAAK,aACLC,SAAU,SAAAC,GACThB,EAAQ,CAAEiB,UAAW,CAAEC,SAAUF,EAAEE,SAAUC,SAAUH,EAAEG,WAC1D,EAAE,WAEF,SAAC,SAAS,CACTL,KAAK,WACLM,OAAO,SAACT,EAAA,EAAW,CAACC,GAAG,aACvBS,MAAO,CACN,CACCC,UAAU,EACVxB,QAAS,0HAET,UACF,SAAC,IAAK,CAACyB,QAAQ,SAACC,EAAA,EAAY,CAACC,UAAU,sBAExC,SAAC,SAAS,CACTX,KAAK,WACLM,OACC,0BACC,2BAAM,SAACT,EAAA,EAAW,CAACC,GAAG,iBAGxBS,MAAO,CACN,CACCC,UAAU,EACVxB,QAAS,kGAET,UAEF,SAAC,aAAc,CAACyB,QAAQ,SAACG,EAAA,EAAY,CAACD,UAAU,sBAEjD,SAAC,SAAS,WACT,UAAC,IAAM,CAAChB,KAAK,UAAUkB,SAAS,SAASC,OAAK,EAAC3B,QAASA,EAAQ,eAAE,SAACU,EAAA,EAAW,CAACC,GAAG,yBAKvF,EAWAlC,EAAUmD,aAAe,CACxBC,aAAa,EACbC,oBAAoB,GAGrB,QC3FA,G,SA5Cc,WAEZ,IAAQC,GAAeC,EAAAA,EAAAA,KAAfD,WAER,OACE,oBAASP,UAAU,oBAAmB,UACpC,iBAAKA,UAAU,0DAAyD,WACtE,gBACEA,UAAU,sGACVS,MAAO,CACLC,gBAAiB,2BACjBC,iBAAkB,SAClBC,gBAAiB,WACjB,UAEF,iBAAKZ,UAAU,6CAA4C,WACzD,gBACEA,UAAU,iBACVa,IAAKN,EAAWO,KAChBC,IAAI,WAEN,cAAGf,UAAU,qDAAoD,yIACjE,cAAGA,UAAU,qDAAoD,qMAIrE,gBAAKA,UAAU,2DAA0D,UACvE,iBAAKA,UAAU,4FAA2F,WACxG,gBACEA,UAAU,eACVe,IAAI,OACJF,IAAI,oBAEN,SAAC,EAAS,KACV,gBAAKb,UAAU,oBAAmB,UAChC,eAAGA,UAAU,iBAAgB,mBAAI,IAAIgB,MAAOC,cAAa,gCAOvE,E","sources":["views/auth-views/components/LoginForm.js","views/auth-views/authentication/login/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Button, Form, Input, Alert, message } from \"antd\";\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport PropTypes from 'prop-types';\nimport {\n\tAUTH_TOKEN,\n} from 'redux/constants/Auth';\nimport { useHistory } from \"react-router-dom\";\nimport { motion } from \"framer-motion\"\nimport { gql, useMutation } from '@apollo/client';\nimport IntlMessage from 'components/util-components/IntlMessage';\nimport { UserContext } from 'hooks/UserContextProvider';\n\nconst LOG_IN = gql`\n    mutation tokenAuth($username: String!, $password: String!){\n        tokenAuth(username: $username, password: $password) {\n\t\t\tsuccess,\n\t\t\terrors,\n\t\t\tunarchiving,\n\t\t\ttoken,\n\t\t\t# refreshToken,\n\t\t\tunarchiving,\n\t\t\tuser {\n\t\t\t\tid,\n\t\t\t\tfirstName,\n\t\t\t\tlastName,\n\t\t\t\tusername,\n\t\t\t}\n        }\n    }\n`;\n\nexport const LoginForm = props => {\n\tlet history = useHistory();\n\n\tconst { user, refetch } = useContext(UserContext);\n\tconst token = localStorage.getItem(AUTH_TOKEN);\n\tconst [showMessage, setShowMessage] = useState(false)\n\n\tfunction hideAuthMessage() {\n\t\tsetShowMessage(false)\n\t}\n\n\tfunction showAuthMessage() {\n\t\tsetShowMessage(true)\n\t}\n\n\tconst [onLogin, { loading }] = useMutation(LOG_IN, {\n\t\tonCompleted: data => {\n\t\t\tswitch (data.tokenAuth.success) {\n\t\t\t\tcase true:\n\t\t\t\t\tmessage.success('Амжилттай нэвтэрлээ!')\n\t\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, data.tokenAuth.token);\n\t\t\t\t\trefetch()\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tshowAuthMessage();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\tif(showMessage) {\n\t\tsetTimeout(() => {\n\t\t\thideAuthMessage();\n\t\t}, 3000);\n\t}\n\n\tuseEffect(() => {\n\t\tif (token && user) {\n\t\t\thistory.push('/app/home')\n\t\t}\n\t}, [user, token, history])\n\n\treturn (\n\t\t<>\n\t\t\t<motion.div \n\t\t\t\tinitial={{ opacity: 0, marginBottom: 0 }} \n\t\t\t\tanimate={{ \n\t\t\t\t\topacity: showMessage ? 1 : 0,\n\t\t\t\t\tmarginBottom: showMessage ? 20 : 0 \n\t\t\t\t}}> \n\t\t\t\t<Alert type=\"error\" showIcon message={<IntlMessage id=\"login-fail\" />}></Alert>\n\t\t\t</motion.div>\n\t\t\t<Form \n\t\t\t\tlayout=\"vertical\" \n\t\t\t\tname=\"login-form\"\n\t\t\t\tonFinish={e => {\n\t\t\t\t\tonLogin({ variables: { username: e.username, password: e.password } });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Form.Item \n\t\t\t\t\tname=\"username\" \n\t\t\t\t\tlabel={<IntlMessage id=\"username\" />}\n\t\t\t\t\trules={[\n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: 'Нэвтрэх нэр оруулна уу',\n\t\t\t\t\t\t}\n\t\t\t\t\t]}>\n\t\t\t\t\t<Input prefix={<UserOutlined className=\"text-primary\" />}/>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item \n\t\t\t\t\tname=\"password\" \n\t\t\t\t\tlabel={\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span><IntlMessage id=\"password\" /></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t} \n\t\t\t\t\trules={[\n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: 'Нууц үг оруулна уу',\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Input.Password prefix={<LockOutlined className=\"text-primary\" />}/>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" block loading={loading}> <IntlMessage id=\"main.login\" /></Button>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t</>\n\t)\n}\n\nLoginForm.propTypes = {\n\totherSignIn: PropTypes.bool,\n\tshowForgetPassword: PropTypes.bool,\n\textra: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.element\n\t]),\n};\n\nLoginForm.defaultProps = {\n\totherSignIn: true,\n\tshowForgetPassword: false\n};\n\nexport default LoginForm\n","import React from 'react'\nimport useDomain from 'hooks/useDomain'\nimport LoginForm from 'views/auth-views/components/LoginForm'\nimport { APP_NAME } from 'configs/AppConfig'\n\nconst Login = () => {\n\n  const { domainData } = useDomain()\n\n  return (\n    <section className=\"bg-white h-screen\">\n      <div className=\"mx-auto flex justify-center h-full flex-col lg:flex-row\">\n        <div\n          className=\"w-full lg:w-1/2 px-2 py-40 sm:py-48 sm:px-12 hidden flex-col justify-center relative h-full md:flex\"\n          style={{\n            backgroundImage: 'url(/img/background.png)',\n            backgroundRepeat: 'repeat',\n            backgroundColor: '#0f172a'\n          }}\n        >\n          <div className=\"flex relative z-30 flex-col justify-center\">\n            <img\n              className=\"mx-auto w-1/3 \"\n              src={domainData.logo}\n              alt=\"login\"\n            />\n            <p className=\"text-center text-xl text-white leading-normal pt-3\">ЗЭВ ЗАЛУУЧУУДЫН ХОЛБОО</p>\n            <p className=\"text-center text-xl text-white leading-normal pt-3\">Сургалт менежментийн цогц систем</p>\n          </div>\n\n        </div>\n        <div className=\"w-full md:w-1/2 flex justify-center h-full bg-background\">\n          <div className=\"w-full text-gray-800 mb-12 sm:mb-0 flex flex-col items-center justify-center px-2 sm:px-0\">\n            <img\n              className=\"mx-auto w-48\"\n              alt=\"logo\"\n              src='/img/emind.png'\n            />\n            <LoginForm />\n            <div className='absolute bottom-0'>\n              <p className='text-slate-700'>© {new Date().getFullYear()} Meta Soft LLC </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default Login\n"],"names":["LOG_IN","gql","LoginForm","props","history","useHistory","useContext","UserContext","user","refetch","token","localStorage","getItem","AUTH_TOKEN","useState","showMessage","setShowMessage","useMutation","onCompleted","data","tokenAuth","success","message","setItem","onLogin","loading","setTimeout","useEffect","push","initial","opacity","marginBottom","animate","type","showIcon","IntlMessage","id","layout","name","onFinish","e","variables","username","password","label","rules","required","prefix","UserOutlined","className","LockOutlined","htmlType","block","defaultProps","otherSignIn","showForgetPassword","domainData","useDomain","style","backgroundImage","backgroundRepeat","backgroundColor","src","logo","alt","Date","getFullYear"],"sourceRoot":""}